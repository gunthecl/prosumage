GAMS 24.2.3  r46072 Released May 22, 2014 WEX-WEI x86_64/MS Windows 10/24/18 19:37:08 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1   
   2  **************************************************************************
      ******
      The Dispatch and Investment Evaluation Tool with Endogenous Renewables (DI
      ETER).
      Version 1.3.0, October 2017.
      Written by Alexander Zerrahn and Wolf-Peter Schill.
      This work is licensed under the MIT License (MIT).
      For more information on this license, visit http://opensource.org/licenses
      /mit-license.php.
      Whenever you use this code, please refer to http://www.diw.de/dieter.
      We are happy to receive feedback under azerrahn@diw.de and wschill@diw.de.
  12  **************************************************************************
      ******
  13   
  15   
  16   
  17   
  18   
  19  **************************************************************************
      ******
  20  **** Parameters for report file  *****************************************
      ******
  21  **************************************************************************
      ******
  22   
  23  Parameter
  24  corr_fac_dis             Balancing correction factor - dispatchable techno
      logies
  25  corr_fac_nondis          Balancing correction factor - nondispatchable tec
      hnologies
  26  corr_fac_sto             Balancing correction factor - storage technologie
      s
  27  corr_fac_dsm_cu          Balancing correction factor - DSM curtailment tec
      hnologies
  28  corr_fac_dsm_shift       Balancing correction factor - DSM shifting techno
      logies
  29  corr_fac_ev              Balancing correction factor - electric vehicles
  30  corr_fac_rsvr            Balancing correction factor - reservoir
  31  corr_fac_sets            Balancing correction factor - SETS
  32  corr_fac_sets_aux        Balancing correction factor - SETS auxiliary DHW
  33  corr_fac_hp              Balancing correction factor - heat pumps
  34  corr_fac_h_elec          Balancing correction factor - hybrid electric sto
      rage heating
  35   
  36  corr_fac_ev_sep
  37   
  38  gross_energy_demand                      Gross energy demand
  39  gross_energy_demand_market               Gross energy demand - market (non
      -prosumage segment)
  40  gross_energy_demand_prosumers            Gross energy demand - prosumagers
  41  gross_energy_demand_prosumers_selfgen    Gross energy demand - prosumagers
       self-generated
  42  gross_energy_demand_prosumers_market     Gross energy demand - prosumagers
       from market
  43   
  44  reserves_activated
  45   
  46  calc_maxprice
  47  calc_minprice
  48   
  49  report
  50  report_tech
  51  report_tech_hours
  52  report_hours
  53  report_node
  54  report_line
  55  report_cost
  56   
  57  report_reserves
  58  report_reserves_hours
  59  report_reserves_tech
  60  report_reserves_tech_hours
  61   
  62  report_prosumage
  63  report_prosumage_tech
  64  report_prosumage_tech_hours
  65  report_market
  66  report_market_tech
  67  report_market_tech_hours
  68   
  69  report_heat_tech_hours
  70  report_heat_tech
  71  ;
  72   
  73   
  74   
  75   
  76  **************************************************************************
      ******
  77  **** Initialize reporting paremetrs  *************************************
      ******
  78  **************************************************************************
      ******
  79   
  80  * Set reporting sensitivity. All results below will be reported as zero
  81  Scalar eps_rep_rel Sensitivity for shares defined between 0 and 1        /
       1e-4 / ;
  82  Scalar eps_rep_abs Sensitivity for absolute values - e.g. hourly         /
       1e-2 / ;
  83  Scalar eps_rep_ins Sensitivity for absolute values - e.g. installed MW   /
       1 /    ;
  84   
  85   
  86  * ------------------------------------------------------------------------
      ----
  87   
  88  * Min and max for prices
  89  calc_maxprice = 0 ;
  90  calc_minprice = 1000 ;
  91   
  92   
  93  * ------------------------------------------------------------------------
      ----
  94   
  95  * Default values for correction factors
  96  corr_fac_dis(scen,dis,h) = 0 ;
****                  $120$120,120
  97  corr_fac_nondis(scen,nondis,h) = 0 ;
****                            $120
  98  corr_fac_sto(scen,sto,h) = 0 ;
****                      $120
  99  *corr_fac_dsm_cu(scen,dsm_curt,h) = 0 ;
 100  *corr_fac_dsm_shift(scen,dsm_shift,h) = 0 ;
 101  *corr_fac_ev(scen,h) = 0 ;
 102  *corr_fac_rsvr(scen,rsvr,h) = 0 ;
 103  *corr_fac_sets(scen,bu,ch,h) = 0 ;
 104  *corr_fac_sets_aux(scen,bu,ch,h) = 0 ;
 105  *corr_fac_hp(scen,bu,ch,h) = 0 ;
 106  *corr_fac_h_elec(scen,bu,ch,h) = 0 ;
 107   
 108  *corr_fac_ev_sep(scen,ev,h) = 0 ;
 109   
 110   
 111  * ------------------------------------------------------------------------
      ----
 112   
 113  * Parameter for hourly nodal reserves activated
 114  reserves_activated(scen,h) = 0 ;
 115   
 116   
 117   
 118   
 119   
 120  * ------------------------------------------------------------------------
      ----
 121   
 122  * Prepare prosumage reporting parameters
 123  %prosumage$ontext
****  $409
 124  gross_energy_demand_prosumers(scen)= sum( h , phi_pro_load * d(h));
 125  gross_energy_demand_prosumers_selfgen(scen)= sum( (h,res) , lev_G_RES_PRO(
****                                                         $120             $1
      scen,res,h)) + sum( (sto,h) , lev_STO_OUT_PRO2PRO(scen,sto,h) ) ;
      40                                              $140
 126  gross_energy_demand_prosumers_market(scen)= sum( h , lev_G_MARKET_M2PRO(sc
****                                                                        $140
      en,h)) + sum( (sto,h) , lev_STO_OUT_M2PRO(scen,sto,h) ) ;
                                              $140
 129   
 130   
 131  * ------------------------------------------------------------------------
      ----
 132   
 133  *Determine balancing correction factors
 134   
 135   
 136   
 137   
 138  * ------------------------------------------------------------------------
      ----
 139   
 140  * Define gross energy demand for reporting
 141  gross_energy_demand(scen)= sum( h , d(h) + sum( sto , lev_STO_IN(scen,sto,
****                                      $140                       $140       
      h) - lev_STO_OUT(scen,sto,h) )
                     $140
 142  %prosumage$ontext
****  $8,409
 143           + sum( sto , sum( res , lev_STO_IN_PRO2PRO(scen,res,sto,h) + lev_
      STO_IN_PRO2M(scen,res,sto,h) ) + lev_STO_IN_M2PRO(scen,sto,h) + lev_STO_IN
      _M2M(scen,sto,h) - lev_STO_OUT_PRO2PRO(scen,sto,h) - lev_STO_OUT_PRO2M(sce
      n,sto,h) - lev_STO_OUT_M2PRO(scen,sto,h) - lev_STO_OUT_M2M(scen,sto,h) )
 146   
 147   
 148  )
 149  ;
 150   
 151   
 152  **************************************************************************
      ******
 153  **** Report  *************************************************************
      ******
 154  **************************************************************************
      ******
 155   
 156  * RPEORT model statistics
 157          report('model status',loop_res_share,loop_ev,loop_prosumage) = sum
****                                             $120,340$120,340       $120,340
      (scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , modstats(scen,'m
               $140                                                    $140     
      odelstat')) ;
              $116
 158          report('solve time',loop_res_share,loop_ev,loop_prosumage) = sum(s
      cen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , modstats(scen,'res
      usd')) ;
****     $116
 159          report('obj value',loop_res_share,loop_ev,loop_prosumage) = sum(sc
      en$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_Z(scen)* %sec_h
****                                                             $140     $119  
      our%) ;
        $140,8,409
 160   
 161   
 162  * ------------------------------------------------------------------------
      ----
 163   
 164  * REPORT HOURS
 165          report_hours('demand consumers',loop_res_share,loop_ev,loop_prosum
      age,h)= d(h) ;
 166          report_hours('energy generated',loop_res_share,loop_ev,loop_prosum
      age,h)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( 
      dis , lev_G_L(scen,dis,h) ) + sum( nondis , lev_G_RES(scen,nondis,h) - cor
****              $140                                    $140
      r_fac_nondis(scen,nondis,h)) + sum( sto , lev_STO_OUT(scen,sto,h) - corr_f
      ac_sto(scen,sto,h))
 167  *+ sum( dsm_shift, lev_DSM_DO_DEMAND(scen,dsm_shift,h)
 168  *- corr_fac_dsm_shift(scen,dsm_shift,h))
 169  *+ sum( ev , lev_EV_DISCHARGE(scen,ev,h)) - corr_fac_ev(scen,h) + sum( rsv
      r , lev_RSVR_OUT(scen,rsvr,h) - corr_fac_rsvr(scen,rsvr,h))
 170  + sum( res , lev_G_RES_PRO(scen,res,h) + lev_G_MARKET_PRO2M(scen,res,h) + 
****                                                            $140            
      sum( sto , lev_STO_IN_PRO2PRO(scen,res,sto,h) + lev_STO_IN_PRO2M(scen,res,
                                  $140                               $140       
      sto,h))) + sum( sto , lev_STO_OUT_PRO2PRO(scen,sto,h) + lev_STO_OUT_PRO2M(
                                                                              $1
      scen,sto,h) + lev_STO_OUT_M2PRO(scen,sto,h) + lev_STO_OUT_M2M(scen,sto,h))
      40                                                          $140
       ) ;
 171  *        report_hours('infeasibility',loop_res_share,loop_ev,loop_prosumag
      e,h)=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_G_
      INFES(scen,h));
 172  *        report_hours('gross exports',loop_res_share,loop_ev,loop_prosumag
      e,h)= sum( l , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
      , -min(inc(l)* lev_F(scen,l,h),0) )) ;
 173  *        report_hours('gross imports',loop_res_share,loop_ev,loop_prosumag
      e,h)= sum( l , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
      , max(inc(l)* lev_F(scen,l,h),0) ) ) ;
 174          report_hours('price',loop_res_share,loop_ev,loop_prosumage,h)= - s
      um(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , marginal_con1a
****                                                                           $
      (scen,h)) ;
      140
 175   
 176                   report_hours('energy generated',loop_res_share,loop_ev,lo
      op_prosumage,h)$(report_hours('energy generated',loop_res_share,loop_ev,lo
      op_prosumage,h)< eps_rep_abs ) = 0 ;
 177                   report_hours('energy demanded',loop_res_share,loop_ev,loo
      p_prosumage,h)$(report_hours('energy demanded',loop_res_share,loop_ev,loop
      _prosumage,h)< eps_rep_abs ) = 0 ;
 178  *                 report_hours('gross exports',loop_res_share,loop_ev,loop
      _prosumage,h)$(report_hours('gross exports',loop_res_share,loop_ev,loop_pr
      osumage,h)< eps_rep_abs ) = 0 ;
 179  *                 report_hours('gross imports',loop_res_share,loop_ev,loop
      _prosumage,h)$(report_hours('gross imports',loop_res_share,loop_ev,loop_pr
      osumage,h)< eps_rep_abs ) = 0 ;
 180                   report_hours('demand consumers',loop_res_share,loop_ev,lo
      op_prosumage,h)$(report_hours('demand consumers',loop_res_share,loop_ev,lo
      op_prosumage,h)< eps_rep_abs) = 0 ;
 181                   report_hours('price',loop_res_share,loop_ev,loop_prosumag
      e,h)$(report_hours('price',loop_res_share,loop_ev,loop_prosumage,h)< eps_r
      ep_abs AND report_hours('price',loop_res_share,loop_ev,loop_prosumage,h)> 
      -eps_rep_abs) = eps ;
 182  *                 report_hours('infeasibility',loop_res_share,loop_ev,loop
      _prosumage,h)$(report_hours('infeasibility',loop_res_share,loop_ev,loop_pr
      osumage,h)< eps_rep_abs) = 0 ;
 183   
 184   
 185  * ------------------------------------------------------------------------
      ----
 186   
 187  * REPORT TECH HOURS
 188          report_tech_hours('generation conventional',loop_res_share,loop_ev
      ,loop_prosumage,con,h)=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_pr
****                    $120,340
      osumage)) , lev_G_L(scen,con,h) + corr_fac_dis(scen,con,h)) ;
 189  *        report_tech_hours('infeasibility',loop_res_share,loop_ev,loop_pro
      sumage,'',h)=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
      , lev_G_INFES(scen,h) ) ;
 190          report_tech_hours('generation renewable',loop_res_share,loop_ev,lo
      op_prosumage,res,h)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosum
      age)) , lev_G_L(scen,res,h) + corr_fac_dis(scen,res,h) + lev_G_RES(scen,re
      s,h) + lev_G_RES_PRO(scen,res,h) + lev_G_MARKET_PRO2M(scen,res,h) + sum( s
      to , lev_STO_IN_PRO2PRO(scen,res,sto,h) + lev_STO_IN_PRO2M(scen,res,sto,h)
      ) ) ;
 191  *        report_tech_hours('generation renewable',loop_res_share,loop_ev,l
      oop_prosumage,rsvr,h)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_pros
      umage)) , lev_RSVR_OUT(scen,rsvr,h) ) ;
 192  *        report_tech_hours('reservoir inflow',loop_res_share,loop_ev,loop_
      prosumage,rsvr,h)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumag
      e)) , rsvr_in(rsvr,h)/1000 * lev_N_RSVR_E(scen,rsvr) ) ;
 193  *        report_tech_hours('reservoir level',loop_res_share,loop_ev,loop_p
      rosumage,rsvr,h)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage
      )) , lev_RSVR_L(scen,rsvr,h) ) ;
 194          report_tech_hours('curtailment of fluct res',loop_res_share,loop_e
      v,loop_prosumage,res,h)=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_p
      rosumage)) , lev_CU(scen,res,h) + lev_CU_PRO(scen,res,h) ) ;
****                    $140                     $140
 195          report_tech_hours('generation storage',loop_res_share,loop_ev,loop
      _prosumage,sto,h)=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosuma
      ge)) , lev_STO_OUT(scen,sto,h) + lev_STO_OUT_PRO2M(scen,sto,h) + lev_STO_O
      UT_PRO2PRO(scen,sto,h) + lev_STO_OUT_M2PRO(scen,sto,h) + lev_STO_OUT_M2M(s
      cen,sto,h) ) ;
 196          report_tech_hours('storage loading',loop_res_share,loop_ev,loop_pr
      osumage,sto,h)=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)
      ) , lev_STO_IN(scen,sto,h) + sum( res , lev_STO_IN_PRO2PRO(scen,res,sto,h)
       + lev_STO_IN_PRO2M(scen,res,sto,h)) + lev_STO_IN_M2PRO(scen,sto,h) + lev_
****                                                        $140                
      STO_IN_M2M(scen,sto,h) ) ;
               $140
 197          report_tech_hours('storage level',loop_res_share,loop_ev,loop_pros
      umage,sto,h)=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
      , lev_STO_L(scen,sto,h) + lev_STO_L_PRO(scen,sto,h) ) ;
****            $140                        $140
 198  *        report_tech_hours('netto exports',loop_res_share,loop_ev,loop_pro
      sumage,'',h)=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
      , - sum( l , inc(l)* lev_F(scen,l,h)) ) ;
 199   
 200                   report_tech_hours('generation conventional',loop_res_shar
      e,loop_ev,loop_prosumage,con,h)$(report_tech_hours('generation conventiona
      l',loop_res_share,loop_ev,loop_prosumage,con,h)< eps_rep_abs) = 0 ;
 201                   report_tech_hours('generation renewable',loop_res_share,l
      oop_ev,loop_prosumage,res,h)$(report_tech_hours('generation renewable',loo
      p_res_share,loop_ev,loop_prosumage,res,h)< eps_rep_abs) = 0 ;
 202                   report_tech_hours('generation renewable',loop_res_share,l
      oop_ev,loop_prosumage,rsvr,h)$(report_tech_hours('generation renewable',lo
****                           $120,340
      op_res_share,loop_ev,loop_prosumage,rsvr,h)< eps_rep_abs) = 0 ;
 203                   report_tech_hours('curtailment of fluct res',loop_res_sha
      re,loop_ev,loop_prosumage,res,h)$(report_tech_hours('curtailment of fluct 
      res',loop_res_share,loop_ev,loop_prosumage,res,h)< eps_rep_abs) = 0 ;
 204                   report_tech_hours('generation storage',loop_res_share,loo
      p_ev,loop_prosumage,sto,h)$(report_tech_hours('generation storage',loop_re
      s_share,loop_ev,loop_prosumage,sto,h)< eps_rep_abs) = 0 ;
 205                   report_tech_hours('storage loading',loop_res_share,loop_e
      v,loop_prosumage,sto,h)$(report_tech_hours('storage loading',loop_res_shar
      e,loop_ev,loop_prosumage,sto,h)< eps_rep_abs) = 0 ;
 206                   report_tech_hours('storage level',loop_res_share,loop_ev,
      loop_prosumage,sto,h)$(report_tech_hours('storage level',loop_res_share,lo
      op_ev,loop_prosumage,sto,h)< eps_rep_abs) = 0 ;
 207  *                 report_tech_hours('netto exports',loop_res_share,loop_ev
      ,loop_prosumage,'',h)$(abs(report_tech_hours('netto exports',loop_res_shar
      e,loop_ev,loop_prosumage,'',h)) < eps_rep_abs ) = 0 ;
 208  *                 report_tech_hours('infeasibility',loop_res_share,loop_ev
      ,loop_prosumage,'',h)$(report_tech_hours('infeasibility',loop_res_share,lo
      op_ev,loop_prosumage,'',h)< eps_rep_abs ) = 0 ;
 209  *                 report_tech_hours('reservoir inflow',loop_res_share,loop
      _ev,loop_prosumage,rsvr,h)$(report_tech_hours('reservoir inflow',loop_res_
      share,loop_ev,loop_prosumage,rsvr,h)< eps_rep_abs) = 0 ;
 210  *                 report_tech_hours('reservoir level',loop_res_share,loop_
      ev,loop_prosumage,rsvr,h)$(report_tech_hours('reservoir level',loop_res_sh
      are,loop_ev,loop_prosumage,rsvr,h)< eps_rep_abs) = 0 ;
 211   
 212   
 213  * ------------------------------------------------------------------------
      ----
 214   
 215  * RPEORT LINE
               report_line('NTC',loop_res_share,loop_ev,loop_prosumage,l) = sum(
       scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_NTC(scen,l) 
      ) ;
                               report_line('NTC',loop_res_share,loop_ev,loop_pro
      sumage,l)$(report_line('NTC',loop_res_share,loop_ev,loop_prosumage,l) < ep
      s_rep_ins ) = 0 ;
       
               report_line('average line use',loop_res_share,loop_ev,loop_prosum
      age,l)$report_line('NTC',loop_res_share,loop_ev,loop_prosumage,l) = sum( s
      cen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( h, abs(lev_F(
      scen,l,h)))) / sum( h , report_line('NTC',loop_res_share,loop_ev,loop_pros
      umage,l)) ;
                       report_line('avergae line use',loop_res_share,loop_ev,loo
      p_prosumage,l)$(report_line('average line use',loop_res_share,loop_ev,loop
      _prosumage,l) < eps_rep_rel) = 0 ;
       
 224  * ------------------------------------------------------------------------
      ----
 225   
 226  * REPORT NODE
 227          report_node('energy demand total',loop_res_share,loop_ev,loop_pros
      umage)= (sum( h , d(h) ) + sum( (sto,h) , sum(scen$(map(scen,loop_res_shar
      e,loop_ev,loop_prosumage)) , lev_STO_IN(scen,sto,h) + sum( res , lev_STO_I
      N_PRO2PRO(scen,res,sto,h) + lev_STO_IN_PRO2M(scen,res,sto,h)) + lev_STO_IN
      _M2PRO(scen,sto,h) + lev_STO_IN_M2M(scen,sto,h)) )) * %sec_hour%
****                                                        $119     $409
 228   
 229  ;
 230          report_node('energy demand gross',loop_res_share,loop_ev,loop_pros
      umage)= sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , gros
      s_energy_demand(scen)) ;
 231          report_node('energy generated net',loop_res_share,loop_ev,loop_pro
      sumage)= sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage
      )) , sum( dis , lev_G_L(scen,dis,h)) + sum( nondis , lev_G_RES(scen,nondis
      ,h) - corr_fac_nondis(scen,nondis,h))
 232  *        + sum( rsvr , lev_RSVR_OUT(scen,rsvr,h) - corr_fac_rsvr(scen,rsvr
      ,h))
 233           + sum( res , phi_res(res,h) * lev_N_RES_PRO(scen,res) - lev_CU_PR
****                              $140                   $140
      O(scen,res,h)) )) ;
 234          report_node('energy generated gross',loop_res_share,loop_ev,loop_p
      rosumage)= sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosuma
      ge)) , sum( dis , lev_G_L(scen,dis,h)) + sum( nondis , lev_G_RES(scen,nond
      is,h) - corr_fac_nondis(scen,nondis,h))
 235  *        + sum( rsvr , lev_RSVR_OUT(scen,rsvr,h)- corr_fac_rsvr(scen,rsvr,
      h))
 236           + sum( sto , lev_STO_OUT(scen,sto,h) - corr_fac_sto(scen,sto,h))
 237  *+ sum( dsm_shift , lev_DSM_DO_DEMAND(scen,dsm_shift,h) - corr_fac_dsm_shi
      ft(scen,dsm_shift,h)) + sum( dsm_curt , lev_DSM_CU(scen,dsm_curt,h)) + sum
      ( ev , lev_EV_DISCHARGE(scen,ev,h)) - corr_fac_ev(scen,h)
 238  +  sum( res , phi_res(res,h) * lev_N_RES_PRO(scen,res) - lev_CU_PRO(scen,r
      es,h)) + sum( sto , lev_STO_OUT_PRO2PRO(scen,sto,h) + lev_STO_OUT_PRO2M(sc
      en,sto,h) + lev_STO_OUT_M2PRO(scen,sto,h) + lev_STO_OUT_M2M(scen,sto,h)) )
      ) ;
 239  *        report_node('net exports',loop_res_share,loop_ev,loop_prosumage)=
       sum( (l,h) , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) ,
       - inc(l)* lev_F(scen,l,h)) ) ;
 240  *        report_node('gross exports',loop_res_share,loop_ev,loop_prosumage
      )= sum( (l,h) , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage))
       , -min(inc(l)* lev_F(scen,l,h),0) ) ) ;
 241  *        report_node('gross imports',loop_res_share,loop_ev,loop_prosumage
      )= sum( (l,h) , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage))
       , max(inc(l)* lev_F(scen,l,h),0) ) ) ;
 242  *        report_node('net import share in gross demand',loop_res_share,loo
      p_ev,loop_prosumage)= -min(report_node('net exports',loop_res_share,loop_e
      v,loop_prosumage,n),0)/report_node('energy demand gross',loop_res_share,lo
      op_ev,loop_prosumage);
 243  *        report_node('net export share in net generation',loop_res_share,l
      oop_ev,loop_prosumage)= max(report_node('net exports',loop_res_share,loop_
      ev,loop_prosumage,n),0)/report_node('energy generated net',loop_res_share,
      loop_ev,loop_prosumage);
 244  *        report_node('trade capacity',loop_res_share,loop_ev,loop_prosumag
      e)= sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( l ,
       abs(inc(l)* lev_NTC(scen,l))) ) ;
 245  *        report_node('gross import share',loop_res_share,loop_ev,loop_pros
      umage)= sum( h , report_hours('gross imports',loop_res_share,loop_ev,loop_
      prosumage,h))/ sum( h , report_hours('energy demanded',loop_res_share,loop
      _ev,loop_prosumage,h)) ;
 246  *        report_node('gross export share in net generation',loop_res_share
      ,loop_ev,loop_prosumage)= sum( h , report_hours('gross exports',loop_res_s
      hare,loop_ev,loop_prosumage,h))/sum( h , report_hours('energy generated',l
      oop_res_share,loop_ev,loop_prosumage,h)) ;
 247          report_node('Capacity total',loop_res_share,loop_ev,loop_prosumage
      )= sum( tech , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
****             $120,340                                                       
      , lev_N_TECH(scen,tech))) + sum( res , sum(scen$(map(scen,loop_res_share,l
                 $140                                                           
      oop_ev,loop_prosumage)) , lev_N_RES_PRO(scen,res))) + sum( sto , sum(scen$
      (map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_P(scen,sto) 
                                                                    $140        
      + lev_N_STO_P_PRO(scen,sto) ))
                      $140
 248  *        + sum( rsvr , sum(scen$(map(scen,loop_res_share,loop_ev,loop_pros
      umage)) , lev_N_RSVR_P(scen,rsvr)))
 249   
 250  ;
 251          report_node('curtailment of fluct res absolute',loop_res_share,loo
      p_ev,loop_prosumage)= sum((nondis,h), sum(scen$(map(scen,loop_res_share,lo
      op_ev,loop_prosumage)) , lev_CU_PRO(scen,nondis,h) + lev_CU(scen,nondis,h)
      )) * %sec_hour% ;
****       $119     $409
 252          report_node('curtailment of fluct res relative',loop_res_share,loo
      p_ev,loop_prosumage)$(sum((nondis,h), sum(scen$(map(scen,loop_res_share,lo
      op_ev,loop_prosumage)) , phi_res(nondis,h) * (lev_N_TECH(scen,nondis)))) +
       sum((res,h), sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) ,
       phi_res(res,h) * lev_N_RES_PRO(scen,res))) > eps_rep_abs*card(res)*card(h
      )) = (sum((res,h), sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumag
      e)) , lev_CU_PRO(scen,res,h))) + sum((nondis,h), sum(scen$(map(scen,loop_r
      es_share,loop_ev,loop_prosumage)) , lev_CU(scen,nondis,h)))) * %sec_hour% 
****                                                                 $119     $4
      / (sum((res,h), sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage))
      09
       , phi_res(res,h) * lev_N_RES_PRO(scen,res))) + sum((nondis,h), sum(scen$(
      map(scen,loop_res_share,loop_ev,loop_prosumage)) , phi_res(nondis,h) * (le
      v_N_TECH(scen,nondis))))) ;
 253          report_node('bio not utilized absolute',loop_res_share,loop_ev,loo
      p_prosumage)$(m_e('bio')) = (m_e('bio') - sum(h, sum(scen$(map(scen,loop_r
****                  $140  $116                                                
      es_share,loop_ev,loop_prosumage)) , lev_G_L(scen,'bio',h)))) * %sec_hour% 
                                                                     $119     $4
      ;
      09
 254          report_node('bio not utilized relative',loop_res_share,loop_ev,loo
      p_prosumage)$(m_e('bio')) = (m_e('bio') - sum(h, sum(scen$(map(scen,loop_r
      es_share,loop_ev,loop_prosumage)) , lev_G_L(scen,'bio',h)))) / m_e('bio') 
      ;
 255          report_node('max price',loop_res_share,loop_ev,loop_prosumage)$sum
      (h,d(h)) = max( calc_maxprice , smax( h, sum(scen$(map(scen,loop_res_share
      ,loop_ev,loop_prosumage)) , - marginal_con1a(scen,h))) ) ;
 256          report_node('min price',loop_res_share,loop_ev,loop_prosumage)$sum
      (h,d(h)) = min( calc_minprice , smin( h, sum(scen$(map(scen,loop_res_share
      ,loop_ev,loop_prosumage)) , - marginal_con1a(scen,h))) ) ;
 257          report_node('mean price',loop_res_share,loop_ev,loop_prosumage)$su
      m(h,d(h)) = -sum(h, sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosuma
      ge)) , marginal_con1a(scen,h)))/card(h) ;
 258   
 259                   report_node('energy demand total',loop_res_share,loop_ev,
      loop_prosumage)$(report_node('energy demand total',loop_res_share,loop_ev,
      loop_prosumage)< eps_rep_abs) = 0 ;
 260                   report_node('curtailment of fluct res absolute',loop_res_
      share,loop_ev,loop_prosumage)$(report_node('curtailment of fluct res absol
      ute',loop_res_share,loop_ev,loop_prosumage)< eps_rep_abs*card(h)*%sec_hour
****                                                                   $119     
      %) = 0 ;
      $8,36,409
 261                   report_node('curtailment of fluct res relative',loop_res_
      share,loop_ev,loop_prosumage)$(report_node('curtailment of fluct res relat
      ive',loop_res_share,loop_ev,loop_prosumage)< eps_rep_rel) = 0 ;
 262                   report_node('bio not utilized absolute',loop_res_share,lo
      op_ev,loop_prosumage)$(report_node('bio not utilized absolute',loop_res_sh
      are,loop_ev,loop_prosumage)< eps_rep_abs*card(h)*%sec_hour%) = 0 ;
****                                                   $119     $8,36,409
 263                   report_node('bio not utilized relative',loop_res_share,lo
      op_ev,loop_prosumage)$(report_node('bio not utilized relative',loop_res_sh
      are,loop_ev,loop_prosumage)< eps_rep_rel) = 0 ;
 264                   report_node('min price',loop_res_share,loop_ev,loop_prosu
      mage)$(report_node('min price',loop_res_share,loop_ev,loop_prosumage)< eps
      _rep_abs AND report_node('min price',loop_res_share,loop_ev,loop_prosumage
      )> -eps_rep_abs) = eps ;
 265  *                 report_node('gross exports',loop_res_share,loop_ev,loop_
      prosumage)$(report_node('gross exports',loop_res_share,loop_ev,loop_prosum
      age)< eps_rep_abs*card(h)) = 0 ;
 266  *                 report_node('gross imports',loop_res_share,loop_ev,loop_
      prosumage)$(report_node('gross imports',loop_res_share,loop_ev,loop_prosum
      age)< eps_rep_abs*card(h)) = 0 ;
 267  *                 report_node('net exports',loop_res_share,loop_ev,loop_pr
      osumage)$(abs(report_node('net exports',loop_res_share,loop_ev,loop_prosum
      age,n)) < eps_rep_abs*card(h)) = 0 ;
 268                   report_node('energy generated net',loop_res_share,loop_ev
      ,loop_prosumage)$(report_node('energy generated net',loop_res_share,loop_e
      v,loop_prosumage)< eps_rep_abs*card(h)) = 0 ;
 269                   report_node('energy generated gross',loop_res_share,loop_
      ev,loop_prosumage)$(report_node('energy generated gross',loop_res_share,lo
      op_ev,loop_prosumage)< eps_rep_abs) = 0 ;
 270                   report_node('energy demand gross',loop_res_share,loop_ev,
      loop_prosumage)$(report_node('energy demand gross',loop_res_share,loop_ev,
      loop_prosumage)< eps_rep_abs*card(h)) = 0 ;
 271  *                 report_node('net import share in gross demand',loop_res_
      share,loop_ev,loop_prosumage)$(report_node('net import share in gross dema
      nd',loop_res_share,loop_ev,loop_prosumage)< eps_rep_rel) = 0 ;
 272  *                 report_node('net export share in net generation',loop_re
      s_share,loop_ev,loop_prosumage)$(report_node('net export share in net gene
      ration',loop_res_share,loop_ev,loop_prosumage)< eps_rep_rel) = 0 ;
 273                   report_node('Capacity total',loop_res_share,loop_ev,loop_
      prosumage)$(report_node('Capacity total',loop_res_share,loop_ev,loop_prosu
      mage)< eps_rep_ins) = 0 ;
 274  *                 report_node('gross import share',loop_res_share,loop_ev,
      loop_prosumage)$(report_node('gross import share',loop_res_share,loop_ev,l
      oop_prosumage)< eps_rep_rel ) = 0 ;
 275  *                 report_node('gross export share in net generation',loop_
      res_share,loop_ev,loop_prosumage)$(report_node('gross export share in net 
      generation',loop_res_share,loop_ev,loop_prosumage)< eps_rep_rel ) = 0 ;
 276   
 277   
 278  * ------------------------------------------------------------------------
      ----
 279   
 280  * REPORT COST
 281          report_cost('Nodal cost: dispatch',loop_res_share,loop_ev,loop_pro
      sumage)= sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage
      )) , sum( dis , c_m(dis)*lev_G_L(scen,dis,h) + c_up(dis)*lev_G_UP(scen,dis
****                    $140                            $140          $140      
      ,h)$(ord(h)>1) + c_do(dis)*lev_G_DO(scen,dis,h)) + sum( nondis , c_cu(nond
                          $140          $140                              $140  
      is)*lev_CU(scen,nondis,h)) + sum( sto , c_m_sto(sto) * ( lev_STO_OUT(scen,
                                                    $140
      sto,h) + lev_STO_IN(scen,sto,h) ) )
 282   
 283  ));
 284           report_cost('Nodal cost: investment & fix',loop_res_share,loop_ev
      ,loop_prosumage)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage
      )) , sum( tech , c_i(tech)*lev_N_TECH(scen,tech) + c_fix(tech)*lev_N_TECH(
****                     $140                                $140               
      scen,tech) ) + sum( sto , c_i_sto_e(sto)*lev_N_STO_E(scen,sto) + c_fix_sto
                                        $140             $140                  $
      (sto)/2*(lev_N_STO_P(scen,sto)+lev_N_STO_E(scen,sto)) + c_i_sto_p(sto)*lev
      140                                                             $140
      _N_STO_P(scen,sto) )
 285  *        + sum( rsvr , c_i_rsvr_e(rsvr)*lev_N_RSVR_E(scen,rsvr) + c_i_rsvr
      _p(rsvr)*lev_N_RSVR_P(scen,rsvr) + c_fix_rsvr(rsvr) * lev_N_RSVR_P(scen,rs
      vr))
 286   
 287  %prosumage$ontext
****  $8,409
 288                   + sum( res , c_i(res)*lev_N_RES_PRO(scen,res) + c_fix(res
      )*lev_N_RES_PRO(scen,res) ) + sum( sto , c_i_sto_e(sto)*lev_N_STO_E_PRO(sc
      en,sto) + c_fix_sto(sto)/2*(lev_N_STO_P_PRO(scen,sto) + lev_N_STO_E_PRO(sc
      en,sto)) + c_i_sto_p(sto)*lev_N_STO_P_PRO(scen,sto)) + sum( (sto,h) , c_m_
      sto(sto) * ( lev_STO_OUT_PRO2PRO(scen,sto,h) + lev_STO_OUT_M2PRO(scen,sto,
      h) + lev_STO_OUT_PRO2M(scen,sto,h) + lev_STO_OUT_M2M(scen,sto,h) + sum( re
      s , lev_STO_IN_PRO2PRO(scen,res,sto,h) + lev_STO_IN_PRO2M(scen,res,sto,h))
       + lev_STO_OUT_PRO2M(scen,sto,h) + lev_STO_OUT_M2M(scen,sto,h) ) )
 291  );
 292   
 293  *         report_cost('Nodal cost: infeasibility',loop_res_share,loop_ev,l
      oop_prosumage)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage))
       , sum( h , c_infes * lev_G_INFES(scen,h)) ) ;
 294  *         report_cost('Nodal cost: PHEV fuel',loop_res_share,loop_ev,loop_
      prosumage)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , s
      um( (h,ev) , pen_phevfuel(ev) * lev_EV_PHEVFUEL(scen,ev,h)) ) ;
 295  *         report_cost('Nodal cost: fossil heating',loop_res_share,loop_ev,
      loop_prosumage)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)
      ) , sum( (bu,hst,h) , pen_heat_fuel(bu,hst) * lev_H_STO_IN_FOSSIL(scen,bu,
      hst,h)) ) ;
 296           report_cost('Nodal cost: total',loop_res_share,loop_ev,loop_prosu
      mage)= report_cost('Nodal cost: dispatch',loop_res_share,loop_ev,loop_pros
      umage)+ report_cost('Nodal cost: investment & fix',loop_res_share,loop_ev,
      loop_prosumage)+ report_cost('Nodal cost: infeasibility',loop_res_share,lo
****                                                         $116               
      op_ev,loop_prosumage,n)
                           $120,340,149,148
 297  * + report_cost('Nodal cost: PHEV fuel',loop_res_share,loop_ev,loop_prosum
      age,n)
 298  * + report_cost('Nodal cost: fossil heating',loop_res_share,loop_ev,loop_p
      rosumage,n)
 299   ;
               report_cost('Costs lines',loop_res_share,loop_ev,loop_prosumage,l
      ) = sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , c_i_ntc(l
      ) * lev_NTC(scen,l)*dist(l) ) ;
       
                       report_cost('Nodal cost: dispatch',loop_res_share,loop_ev
      ,loop_prosumage)$(report_cost('Nodal cost: dispatch',loop_res_share,loop_e
      v,loop_prosumage)< card(h) * eps_rep_abs) = 0 ;
                       report_cost('Nodal cost: investment & fix',loop_res_share
      ,loop_ev,loop_prosumage)$(report_cost('Nodal cost: investment & fix',loop_
      res_share,loop_ev,loop_prosumage)< eps_rep_ins) = 0 ;
                       report_cost('Nodal cost: infeasibility',loop_res_share,lo
      op_ev,loop_prosumage)$(report_cost('Nodal cost: infeasibility',loop_res_sh
      are,loop_ev,loop_prosumage)< card(h) * eps_rep_abs) = 0 ;
                       report_cost('Nodal cost: PHEV fuel',loop_res_share,loop_e
      v,loop_prosumage)$(report_cost('Nodal cost: PHEV fuel',loop_res_share,loop
      _ev,loop_prosumage)< eps_rep_abs) = 0 ;
                       report_cost('Nodal cost: fossil heating',loop_res_share,l
      oop_ev,loop_prosumage)$(report_cost('Nodal cost: fossil heating',loop_res_
      share,loop_ev,loop_prosumage)< card(h) * eps_rep_abs) = 0 ;
                       report_cost('Nodal cost: total',loop_res_share,loop_ev,lo
      op_prosumage)$(report_cost('Nodal cost: total',loop_res_share,loop_ev,loop
      _prosumage)< eps_rep_abs) = 0 ;
                       report_cost('Costs lines',loop_res_share,loop_ev,loop_pro
      sumage,l)$(report_cost('Costs lines',loop_res_share,loop_ev,loop_prosumage
      ,l) < eps_rep_ins) = 0 ;
 311   
 312  * ------------------------------------------------------------------------
      ----
 313   
 314  * REPORT TECH
 315          report_tech('capacities conventional',loop_res_share,loop_ev,loop_
      prosumage,con)=  sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage
      )) , lev_N_TECH(scen,con)) ;
 316          report_tech('capacities renewable',loop_res_share,loop_ev,loop_pro
      sumage,res)= 0 + sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage
      )) , lev_N_TECH(scen,res) + lev_N_RES_PRO(scen,res)) ;
 317  *        report_tech('capacities reservoir MW',loop_res_share,loop_ev,loop
      _prosumage,rsvr)=  sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosuma
      ge)) , lev_N_RSVR_P(scen,rsvr));
 318  *        report_tech('capacities reservoir MWh',loop_res_share,loop_ev,loo
      p_prosumage,rsvr)=  sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosum
      age)) , lev_N_RSVR_E(scen,rsvr));
 319          report_tech('capacities storage MW',loop_res_share,loop_ev,loop_pr
      osumage,sto)=  sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage))
       , lev_N_STO_P(scen,sto)+ lev_N_STO_P_PRO(scen,sto)) ;
 320          report_tech('capacities storage MWh',loop_res_share,loop_ev,loop_p
      rosumage,sto)=  sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)
      ) , lev_N_STO_E(scen,sto)+ lev_N_STO_E_PRO(scen,sto)) * %sec_hour% ;
****                                           $140           $119     $409
 321   
 322          report_tech('Capacity share',loop_res_share,loop_ev,loop_prosumage
      ,con)= sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N
      _TECH(scen,co)) / report_node('Capacity total',loop_res_share,loop_ev,loop
****              $120,340,149
      _prosumage)+ 1e-9 ;
 323          report_tech('Capacity share',loop_res_share,loop_ev,loop_prosumage
      ,res)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_
      TECH(scen,res)) / report_node('Capacity total',loop_res_share,loop_ev,loop
      _prosumage)+ 1e-9 ;
 324  *        report_tech('Capacity share',loop_res_share,loop_ev,loop_prosumag
      e,rsvr)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_
      N_RSVR_P(scen,rsvr)) / report_node('Capacity total',loop_res_share,loop_ev
      ,loop_prosumage)+ 1e-9 ;
 325          report_tech('Capacity share',loop_res_share,loop_ev,loop_prosumage
      ,res)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_
      TECH(scen,res) + lev_N_RES_PRO(scen,res) ) / report_node('Capacity total',
      loop_res_share,loop_ev,loop_prosumage)+ 1e-9 ;
 326          report_tech('Capacity share',loop_res_share,loop_ev,loop_prosumage
      ,sto)= sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_
      STO_P(scen,sto) + lev_N_STO_P_PRO(scen,sto) ) / report_node('Capacity tota
      l',loop_res_share,loop_ev,loop_prosumage)+ 1e-9 ;
 327   
 328          report_tech('renshares in nodal gross demand',loop_res_share,loop_
      ev,loop_prosumage,res)= sum( h, sum(scen$(map(scen,loop_res_share,loop_ev,
      loop_prosumage)) , lev_G_L(scen,res,h) + lev_G_MARKET_PRO2M(scen,res,h) + 
      lev_G_RES_PRO(scen,res,h) + sum( sto , lev_STO_IN_PRO2PRO(scen,res,sto,h) 
      + lev_STO_IN_PRO2M(scen,res,sto,h)) + lev_G_RES(scen,res,h) - corr_fac_non
      dis(scen,res,h))) / sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosum
      age)) , gross_energy_demand(scen)) ;
 329  *        report_tech('renshares in nodal gross demand',loop_res_share,loop
      _ev,loop_prosumage,rsvr)= sum( h, sum(scen$(map(scen,loop_res_share,loop_e
      v,loop_prosumage)) , lev_RSVR_OUT(scen,rsvr,h) - corr_fac_rsvr(scen,rsvr,h
      )) ) / sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , gross
      _energy_demand(scen)) ;
 330          report_tech('conshares in nodal gross demand',loop_res_share,loop_
      ev,loop_prosumage,con)= sum( h, sum(scen$(map(scen,loop_res_share,loop_ev,
      loop_prosumage)) , lev_G_L(scen,con,h)) ) / sum( scen$(map(scen,loop_res_s
      hare,loop_ev,loop_prosumage)) , gross_energy_demand(scen)) ;
 331          report_tech('renshares in nodal net generation',loop_res_share,loo
      p_ev,loop_prosumage,res)$report_node('energy generated net',loop_res_share
      ,loop_ev,loop_prosumage)= sum( h, sum(scen$(map(scen,loop_res_share,loop_e
      v,loop_prosumage)) , lev_G_L(scen,res,h) + lev_G_MARKET_PRO2M(scen,res,h) 
      + lev_G_RES_PRO(scen,res,h) + sum( sto , lev_STO_IN_PRO2PRO(scen,res,sto,h
      )) + lev_G_RES(scen,res,h) - corr_fac_nondis(scen,res,h))) / sum( scen$(ma
      p(scen,loop_res_share,loop_ev,loop_prosumage)) , report_node('energy gener
      ated net',loop_res_share,loop_ev,loop_prosumage)) ;
 332  *        report_tech('renshares in nodal net generation',loop_res_share,lo
      op_ev,loop_prosumage,rsvr)$report_node('energy generated net',loop_res_sha
      re,loop_ev,loop_prosumage)= sum( h, sum(scen$(map(scen,loop_res_share,loop
      _ev,loop_prosumage)) , lev_RSVR_OUT(scen,rsvr,h) - corr_fac_rsvr(scen,rsvr
      ,h)) ) / sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , rep
      ort_node('energy generated net',loop_res_share,loop_ev,loop_prosumage)) ;
 333          report_tech('conshares in nodal net generation',loop_res_share,loo
      p_ev,loop_prosumage,con)$report_node('energy generated net',loop_res_share
      ,loop_ev,loop_prosumage)= sum( h, sum(scen$(map(scen,loop_res_share,loop_e
      v,loop_prosumage)) , lev_G_L(scen,con,h)) ) / sum( scen$(map(scen,loop_res
      _share,loop_ev,loop_prosumage)) , report_node('energy generated net',loop_
      res_share,loop_ev,loop_prosumage)) ;
 334   
 335          report_tech('curtailment of fluct res absolute',loop_res_share,loo
      p_ev,loop_prosumage,res)=  sum(h, sum(scen$(map(scen,loop_res_share,loop_e
      v,loop_prosumage)) , lev_CU(scen,res,h) + lev_CU_PRO(scen,res,h) )) * %sec
****                                                                        $119
      _hour% ;
           $409
 336          report_tech('curtailment of fluct res relative',loop_res_share,loo
      p_ev,loop_prosumage,res)$(report_tech('curtailment of fluct res absolute',
      loop_res_share,loop_ev,loop_prosumage,res)AND sum(h, sum(scen$(map(scen,lo
      op_res_share,loop_ev,loop_prosumage)) , lev_G_RES_PRO(scen,res,h) + lev_G_
      RES(scen,res,h) - corr_fac_nondis(scen,res,h)) ) + sum(h, sum(scen$(map(sc
      en,loop_res_share,loop_ev,loop_prosumage)) , lev_CU_PRO(scen,res,h) + lev_
      CU(scen,res,h))) > card(h)*eps_rep_abs ) =  sum(h, sum(scen$(map(scen,loop
      _res_share,loop_ev,loop_prosumage)) , lev_CU(scen,res,h) + lev_CU_PRO(scen
      ,res,h) ))/( sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosu
      mage)) , phi_res(res,h) * (lev_N_TECH(scen,res) + lev_N_RES_PRO(scen,res) 
      ))) ) ;
 337   
 338          report_tech('Storage out total non-reserves',loop_res_share,loop_e
      v,loop_prosumage,sto)= sum(h, report_tech_hours('generation storage',loop_
      res_share,loop_ev,loop_prosumage,sto,h)) * %sec_hour% ;
****                                             $119     $409
 339          report_tech('Storage in total non-reserves',loop_res_share,loop_ev
      ,loop_prosumage,sto)= sum(h, report_tech_hours('storage loading',loop_res_
      share,loop_ev,loop_prosumage,sto,h)) * %sec_hour% ;
****                                         $119     $409
 340   
 341          report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,con)$(sum(
      scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_TECH(scen,c
      on)) > eps_rep_ins) = sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,l
      oop_prosumage)) , lev_G_L(scen,con,h)) ) / sum(scen$(map(scen,loop_res_sha
      re,loop_ev,loop_prosumage)) , lev_N_TECH(scen,con)) ;
 342          report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,res)$(sum(
      scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_TECH(scen,r
      es)) > eps_rep_ins) = sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,l
      oop_prosumage)) , lev_G_L(scen,res,h) + lev_G_MARKET_PRO2M(scen,res,h) + s
      um( sto , lev_STO_IN_PRO2PRO(scen,res,sto,h)) + lev_G_RES_PRO(scen,res,h) 
      + lev_G_RES(scen,res,h) - corr_fac_nondis(scen,res,h))) / sum(scen$(map(sc
      en,loop_res_share,loop_ev,loop_prosumage)) , lev_N_TECH(scen,res)) ;
 343  *        report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,rsvr)$(su
      m(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_RSVR_P(sc
      en,rsvr)) > eps_rep_ins) = sum( h , sum(scen$(map(scen,loop_res_share,loop
      _ev,loop_prosumage)) , lev_RSVR_OUT(scen,rsvr,h) - corr_fac_rsvr(scen,rsvr
      ,h)) ) / sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_
      N_RSVR_P(scen,rsvr)) ;
 344          report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,sto)$(sum(
      scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_P(scen,
      sto)) > eps_rep_ins) = ( report_tech('Storage out total non-reserves',loop
      _res_share,loop_ev,loop_prosumage,sto,n)) / sum(scen$(map(scen,loop_res_sh
****                                         $149,148
      are,loop_ev,loop_prosumage)) , lev_N_STO_P(scen,sto)) ;
 345   
 346   
 347                   report_tech('capacities conventional',loop_res_share,loop
      _ev,loop_prosumage,con)$(report_tech('capacities conventional',loop_res_sh
      are,loop_ev,loop_prosumage,con)< eps_rep_ins) = 0 ;
 348                   report_tech('capacities renewable',loop_res_share,loop_ev
      ,loop_prosumage,res)$(report_tech('capacities renewable',loop_res_share,lo
      op_ev,loop_prosumage,res)< eps_rep_ins) = 0 ;
 349                   report_tech('capacities storage MW',loop_res_share,loop_e
      v,loop_prosumage,sto)$(report_tech('capacities storage MW',loop_res_share,
      loop_ev,loop_prosumage,sto)< eps_rep_ins) = 0 ;
 350                   report_tech('capacities storage MWh',loop_res_share,loop_
      ev,loop_prosumage,sto)$(report_tech('capacities storage MWh',loop_res_shar
      e,loop_ev,loop_prosumage,sto)< eps_rep_ins) = 0 ;
 351  *                 report_tech('capacities reservoir MW',loop_res_share,loo
      p_ev,loop_prosumage,rsvr)$(report_tech('capacities reservoir MW',loop_res_
      share,loop_ev,loop_prosumage,rsvr)< eps_rep_ins) = 0 ;
 352  *                 report_tech('capacities reservoir MWh',loop_res_share,lo
      op_ev,loop_prosumage,rsvr)$(report_tech('capacities reservoir MWh',loop_re
      s_share,loop_ev,loop_prosumage,rsvr)< eps_rep_ins) = 0 ;
 353                   report_tech('renshares in nodal gross demand',loop_res_sh
      are,loop_ev,loop_prosumage,res)$(report_tech('renshares in nodal gross dem
      and',loop_res_share,loop_ev,loop_prosumage,res)< eps_rep_rel) = 0 ;
 354  *                 report_tech('renshares in nodal gross demand',loop_res_s
      hare,loop_ev,loop_prosumage,rsvr)$(report_tech('renshares in nodal gross d
      emand',loop_res_share,loop_ev,loop_prosumage,rsvr)< eps_rep_rel) = 0 ;
 355                   report_tech('conshares in nodal gross demand',loop_res_sh
      are,loop_ev,loop_prosumage,con)$(report_tech('conshares in nodal gross dem
      and',loop_res_share,loop_ev,loop_prosumage,con)< eps_rep_rel) = 0 ;
 356                   report_tech('renshares in nodal net generation',loop_res_
      share,loop_ev,loop_prosumage,res)$(report_tech('renshares in nodal net gen
      eration',loop_res_share,loop_ev,loop_prosumage,res)< eps_rep_rel) = 0 ;
 357  *                 report_tech('renshares in nodal net generation',loop_res
      _share,loop_ev,loop_prosumage,rsvr)$(report_tech('renshares in nodal net g
      eneration',loop_res_share,loop_ev,loop_prosumage,rsvr)< eps_rep_rel) = 0 ;
 358                   report_tech('conshares in nodal net generation',loop_res_
      share,loop_ev,loop_prosumage,con)$(report_tech('conshares in nodal net gen
      eration',loop_res_share,loop_ev,loop_prosumage,con)< eps_rep_rel) = 0 ;
 359                   report_tech('curtailment of fluct res absolute',loop_res_
      share,loop_ev,loop_prosumage,res)$(report_tech('curtailment of fluct res a
      bsolute',loop_res_share,loop_ev,loop_prosumage,res)< eps_rep_abs*card(h)*%
****                                                                           $
      sec_hour%) = 0 ;
      119     $8,36,409
 360                   report_tech('curtailment of fluct res relative',loop_res_
      share,loop_ev,loop_prosumage,res)$(report_tech('curtailment of fluct res r
      elative',loop_res_share,loop_ev,loop_prosumage,res)< eps_rep_rel) = 0 ;
 361                   report_tech('Capacity share',loop_res_share,loop_ev,loop_
      prosumage,con)$(report_tech('Capacity share',loop_res_share,loop_ev,loop_p
      rosumage,con)< eps_rep_rel) = 0 ;
 362                   report_tech('Capacity share',loop_res_share,loop_ev,loop_
      prosumage,res)$(report_tech('Capacity share',loop_res_share,loop_ev,loop_p
      rosumage,res)< eps_rep_rel) = 0 ;
 363  *                 report_tech('Capacity share',loop_res_share,loop_ev,loop
      _prosumage,rsvr)$(report_tech('Capacity share',loop_res_share,loop_ev,loop
      _prosumage,rsvr)< eps_rep_rel) = 0 ;
 364                   report_tech('Capacity share',loop_res_share,loop_ev,loop_
      prosumage,sto)$(report_tech('Capacity share',loop_res_share,loop_ev,loop_p
      rosumage,sto)< eps_rep_rel) = 0 ;
 365                   report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,c
      on)$(report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,con)< eps_rep
      _abs) = 0 ;
 366                   report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,r
      es)$(report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,res)< eps_rep
      _abs) = 0 ;
 367  *                 report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,
      rsvr)$(report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,rsvr)< eps_
      rep_abs) = 0 ;
 368                   report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,s
      to)$(report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep
      _abs) = 0 ;
 369                   report_tech('Storage out total non-reserves',loop_res_sha
      re,loop_ev,loop_prosumage,sto)$(report_tech('Storage out total non-reserve
      s',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_abs*card(h)*%sec_ho
****                                                                     $119   
      ur%) = 0 ;
        $8,36,409
 370                   report_tech('Storage in total non-reserves',loop_res_shar
      e,loop_ev,loop_prosumage,sto)$(report_tech('Storage in total non-reserves'
      ,loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_abs*card(h)*%sec_hour
****                                                                   $119     
      %) = 0 ;
      $8,36,409
 371   
 372   
 373  * ------------------------------------------------------------------------
      ----
 374   
 375  * REPORT NODE
 376          report_node('renshare in nodal gross demand',loop_res_share,loop_e
      v,loop_prosumage)= sum(res, report_tech('renshares in nodal gross demand',
      loop_res_share,loop_ev,loop_prosumage,res,n))
****                                             $149,148
 377  *        + sum( rsvr , report_tech('renshares in nodal gross demand',loop_
      res_share,loop_ev,loop_prosumage,rsvr,n))
 378           ;
 379          report_node('conshare in nodal gross demand',loop_res_share,loop_e
      v,loop_prosumage)= sum(con, report_tech('conshares in nodal gross demand',
      loop_res_share,loop_ev,loop_prosumage,con)) ;
 380  *        report_node('net import share in nodal gross demand',loop_res_sha
      re,loop_ev,loop_prosumage)= - report_node('net exports',loop_res_share,loo
      p_ev,loop_prosumage)/ sum( scen$(map(scen,loop_res_share,loop_ev,loop_pros
      umage)) , gross_energy_demand(scen)) ;
 381          report_node('renshare in nodal net generation',loop_res_share,loop
      _ev,loop_prosumage)= sum(res, report_tech('renshares in nodal net generati
      on',loop_res_share,loop_ev,loop_prosumage,res,n))
****                                                 $149,148
 382  *+ sum( rsvr , report_tech('renshares in nodal net generation',loop_res_sh
      are,loop_ev,loop_prosumage,rsvr,n))
 383           ;
 384          report_node('conshare in nodal net generation',loop_res_share,loop
      _ev,loop_prosumage)= sum(con, report_tech('conshares in nodal net generati
      on',loop_res_share,loop_ev,loop_prosumage,con)) ;
 385   
 386                   report_node('renshare in nodal gross demand',loop_res_sha
      re,loop_ev,loop_prosumage)$(report_node('renshare in nodal gross demand',l
      oop_res_share,loop_ev,loop_prosumage)< eps_rep_rel ) = 0 ;
 387                   report_node('conshare in nodal gross demand',loop_res_sha
      re,loop_ev,loop_prosumage)$(report_node('conshare in nodal gross demand',l
      oop_res_share,loop_ev,loop_prosumage)< eps_rep_rel ) = 0 ;
 388                   report_node('renshare in nodal net generation',loop_res_s
      hare,loop_ev,loop_prosumage)$(report_node('renshare in nodal net generatio
      n',loop_res_share,loop_ev,loop_prosumage)< eps_rep_rel ) = 0 ;
 389                   report_node('conshare in nodal net generation',loop_res_s
      hare,loop_ev,loop_prosumage)$(report_node('conshare in nodal net generatio
      n',loop_res_share,loop_ev,loop_prosumage)< eps_rep_rel ) = 0 ;
 390   
 391   
 392   
 393  * ------------------------------------------------------------------------
      ----
 394   
 395  * REPORT TECH
 396          report_tech('Yearly energy',loop_res_share,loop_ev,loop_prosumage,
      con)= sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
      , lev_G_L(scen,con,h) ) ) ;
 397          report_tech('Yearly energy',loop_res_share,loop_ev,loop_prosumage,
      res)= sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
      , lev_G_L(scen,res,h) + lev_G_MARKET_PRO2M(scen,res,h) + sum(sto , lev_STO
      _IN_PRO2PRO(scen,res,sto,h) + lev_STO_IN_PRO2M(scen,res,sto,h)) + lev_G_RE
      S_PRO(scen,res,h) + lev_G_RES(scen,res,h) - corr_fac_nondis(scen,res,h))) 
      ;
 398  *        report_tech('Yearly energy',loop_res_share,loop_ev,loop_prosumage
      ,rsvr)= sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)
      ) , lev_RSVR_OUT(scen,rsvr,h) - corr_fac_rsvr(scen,rsvr,h) ) ) ;
 399          report_tech('Yearly energy',loop_res_share,loop_ev,loop_prosumage,
      sto)= sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
      , lev_STO_OUT_PRO2PRO(scen,sto,h) + lev_STO_OUT_PRO2M(scen,sto,h) + lev_ST
      O_OUT_M2PRO(scen,sto,h) + lev_STO_OUT_M2M(scen,sto,h) + lev_STO_OUT(scen,s
      to,h) - corr_fac_sto(scen,sto,h)) ) ;
 400   
 401          report_tech('Energy share in nodal gross generation',loop_res_shar
      e,loop_ev,loop_prosumage,con)= sum( h , sum(scen$(map(scen,loop_res_share,
      loop_ev,loop_prosumage)) , lev_G_L(scen,con,h) ) ) / report_node('energy g
      enerated gross',loop_res_share,loop_ev,loop_prosumage)* %sec_hour% + 1e-9 
****                                                          $119     $409
      ;
 402          report_tech('Energy share in nodal gross generation',loop_res_shar
      e,loop_ev,loop_prosumage,res)= sum( h , sum(scen$(map(scen,loop_res_share,
      loop_ev,loop_prosumage)) , lev_G_L(scen,res,h) + lev_G_MARKET_PRO2M(scen,r
      es,h) + sum(sto , lev_STO_IN_PRO2PRO(scen,res,sto,h) + lev_STO_IN_PRO2M(sc
      en,res,sto,h)) + lev_G_RES_PRO(scen,res,h) + lev_G_RES(scen,res,h) - corr_
      fac_nondis(scen,res,h))) / report_node('energy generated gross',loop_res_s
      hare,loop_ev,loop_prosumage)* %sec_hour% + 1e-9 ;
****                                $119     $409
 403  *        report_tech('Energy share in nodal gross generation',loop_res_sha
      re,loop_ev,loop_prosumage,rsvr)= sum( h , sum(scen$(map(scen,loop_res_shar
      e,loop_ev,loop_prosumage)) , lev_RSVR_OUT(scen,rsvr,h) - corr_fac_rsvr(sce
      n,rsvr,h) ) ) / report_node('energy generated gross',loop_res_share,loop_e
      v,loop_prosumage)* %sec_hour% + 1e-9 ;
 404          report_tech('Energy share in nodal gross generation',loop_res_shar
      e,loop_ev,loop_prosumage,sto)= sum( h , sum(scen$(map(scen,loop_res_share,
      loop_ev,loop_prosumage)) , lev_STO_OUT_PRO2PRO(scen,sto,h) + lev_STO_OUT_P
      RO2M(scen,sto,h) + lev_STO_OUT_M2PRO(scen,sto,h) + lev_STO_OUT_M2M(scen,st
      o,h) + lev_STO_OUT(scen,sto,h) - corr_fac_sto(scen,sto,h)) ) / report_node
      ('energy generated gross',loop_res_share,loop_ev,loop_prosumage)* %sec_hou
****                                                                    $119    
      r% + 1e-9 ;
       $409
 405  %reserves% report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,sto)$(s
****  $409
      um(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_P(sc
      en,sto) + lev_N_STO_P_PRO(scen,sto) ) > eps_rep_ins) = report_tech('Storag
      e out total non-reserves',loop_res_share,loop_ev,loop_prosumage,sto)/ sum(
      scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_P(scen,
      sto) + lev_N_STO_P_PRO(scen,sto) ) ;
 406  %reserves% report_tech('Storage cycles',loop_res_share,loop_ev,loop_prosum
****  $409
      age,sto)$(sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev
      _N_STO_E(scen,sto) + lev_N_STO_E_PRO(scen,sto) ) > eps_rep_ins) = report_t
      ech('Storage out total non-reserves',loop_res_share,loop_ev,loop_prosumage
      ,sto)/ sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_
      STO_E(scen,sto) + lev_N_STO_E_PRO(scen,sto) ) * %sec_hour% ;
 407   
 408                   report_tech('Yearly energy',loop_res_share,loop_ev,loop_p
      rosumage,con)$(report_tech('Yearly energy',loop_res_share,loop_ev,loop_pro
      sumage,con)< eps_rep_ins ) = 0 ;
 409                   report_tech('Yearly energy',loop_res_share,loop_ev,loop_p
      rosumage,res)$(report_tech('Yearly energy',loop_res_share,loop_ev,loop_pro
      sumage,res)< eps_rep_ins ) = 0 ;
 410  *                 report_tech('Yearly energy',loop_res_share,loop_ev,loop_
      prosumage,rsvr)$(report_tech('Yearly energy',loop_res_share,loop_ev,loop_p
      rosumage,rsvr)< eps_rep_ins ) = 0 ;
 411                   report_tech('Yearly energy',loop_res_share,loop_ev,loop_p
      rosumage,sto)$(report_tech('Yearly energy',loop_res_share,loop_ev,loop_pro
      sumage,sto)< eps_rep_ins ) = 0 ;
 412   
 413                   report_tech('Energy share in nodal gross generation',loop
      _res_share,loop_ev,loop_prosumage,con)$(report_tech('Energy share in nodal
       gross generation',loop_res_share,loop_ev,loop_prosumage,con)< eps_rep_rel
      ) = 0 ;
 414                   report_tech('Energy share in nodal gross generation',loop
      _res_share,loop_ev,loop_prosumage,res)$(report_tech('Energy share in nodal
       gross generation',loop_res_share,loop_ev,loop_prosumage,res)< eps_rep_rel
      ) = 0 ;
 415  *                 report_tech('Energy share in nodal gross generation',loo
      p_res_share,loop_ev,loop_prosumage,rsvr)$(report_tech('Energy share in nod
      al gross generation',loop_res_share,loop_ev,loop_prosumage,rsvr)< eps_rep_
      rel) = 0 ;
 416                   report_tech('Energy share in nodal gross generation',loop
      _res_share,loop_ev,loop_prosumage,sto)$(report_tech('Energy share in nodal
       gross generation',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_rel
      ) = 0 ;
 417  %reserves%       report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,s
****  $409
      to)$(report_tech('FLH',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep
      _abs) = 0 ;
 418  %reserves%       report_tech('Storage cycles',loop_res_share,loop_ev,loop_
****  $409
      prosumage,sto)$(report_tech('Storage cycles',loop_res_share,loop_ev,loop_p
      rosumage,sto)< eps_rep_abs) = 0 ;
 419   
 420   
 421  * ------------------------------------------------------------------------
      ----
 422   
 423  * RPEORT
 424          report('curtailment of fluct res absolute',loop_res_share,loop_ev,
      loop_prosumage) = report_node('curtailment of fluct res absolute',loop_res
      _share,loop_ev,loop_prosumage)  ;
 425          report('curtailment of fluct res relative',loop_res_share,loop_ev,
      loop_prosumage) = report_node('curtailment of fluct res absolute',loop_res
      _share,loop_ev,loop_prosumage) ) / sum((res,h), sum(scen$(map(scen,loop_re
****                                 $408,409
      s_share,loop_ev,loop_prosumage)) , phi_res(res,h) * (lev_N_TECH(scen,res) 
      + lev_N_RES_PRO(scen,res)) )) ;
 426          report('bio not utilized absolute',loop_res_share,loop_ev,loop_pro
      sumage)$( m_e('bio')) = report_node('bio not utilized absolute',loop_res_s
      hare,loop_ev,loop_prosumage)  ;
 427          report('bio not utilized relative',loop_res_share,loop_ev,loop_pro
      sumage)$( m_e('bio')) = report('bio not utilized absolute',loop_res_share,
      loop_ev,loop_prosumage) /m_e('bio') ;
 428          report('Capacity total',loop_res_share,loop_ev,loop_prosumage) = r
      eport_node('Capacity total',loop_res_share,loop_ev,loop_prosumage) ;
 429          report('energy demand gross',loop_res_share,loop_ev,loop_prosumage
      ) = report_node('energy demand gross',loop_res_share,loop_ev,loop_prosumag
      e)  ;
 430          report('energy demand total',loop_res_share,loop_ev,loop_prosumage
      ) = report_node('energy demand total',loop_res_share,loop_ev,loop_prosumag
      e)  ;
 431          report('energy generated net',loop_res_share,loop_ev,loop_prosumag
      e) =  report_node('energy generated net',loop_res_share,loop_ev,loop_prosu
      mage) ;
 432          report('energy generated gross',loop_res_share,loop_ev,loop_prosum
      age) =  report_node('energy generated gross',loop_res_share,loop_ev,loop_p
      rosumage) ;
 433  *        report('gross trade share',loop_res_share,loop_ev,loop_prosumage)
       = sum( (h), report_hours('gross imports',loop_res_share,loop_ev,loop_pros
      umage,h))/ sum( (h), report_hours('energy demanded',loop_res_share,loop_ev
      ,loop_prosumage,h)) ;
 434          report('renshare total',loop_res_share,loop_ev,loop_prosumage) = s
      um( (h) , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum
      ( res , lev_G_L(scen,res,h) + lev_G_RES(scen,res,h) - corr_fac_nondis(scen
      ,res,h) + phi_res(res,h) * lev_N_RES_PRO(scen,res) - lev_CU_PRO(scen,res,h
      ))
 435  *       + sum( rsvr , lev_RSVR_OUT(scen,rsvr,h) - corr_fac_rsvr(scen,rsvr,
      h)))
 436           )/ sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , 
      gross_energy_demand(scen) ) ;
****                              $8
 437          report('conshare total',loop_res_share,loop_ev,loop_prosumage) = s
      um( (h) , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum
      ( con , lev_G_L(scen,con,h)) )) / sum( scen$(map(scen,loop_res_share,loop_
      ev,loop_prosumage)) , gross_energy_demand(scen)) ) ;
****                                                   $408
 438          report('Energy total',loop_res_share,loop_ev,loop_prosumage) = rep
      ort_node('Energy total',loop_res_share,loop_ev,loop_prosumage) ;
 439   
 440                   report('curtailment of fluct res absolute',loop_res_share
      ,loop_ev,loop_prosumage)$(report('curtailment of fluct res absolute',loop_
      res_share,loop_ev,loop_prosumage) < eps_rep_abs*card(h)) = 0 ;
 441                   report('curtailment of fluct res relative',loop_res_share
      ,loop_ev,loop_prosumage)$(report('curtailment of fluct res relative',loop_
      res_share,loop_ev,loop_prosumage) < eps_rep_rel) = 0 ;
 442                   report('bio not utilized absolute',loop_res_share,loop_ev
      ,loop_prosumage)$(report('bio not utilized absolute',loop_res_share,loop_e
      v,loop_prosumage) < eps_rep_abs*card(h)) = 0 ;
 443                   report('bio not utilized relative',loop_res_share,loop_ev
      ,loop_prosumage)$(report('bio not utilized relative',loop_res_share,loop_e
      v,loop_prosumage) < eps_rep_rel) = 0 ;
 444                   report('Capacity total',loop_res_share,loop_ev,loop_prosu
      mage)$(report('Capacity total',loop_res_share,loop_ev,loop_prosumage) < ep
      s_rep_ins) = 0 ;
 445                   report('gross trade share',loop_res_share,loop_ev,loop_pr
      osumage)$(report('gross trade share',loop_res_share,loop_ev,loop_prosumage
      ) < eps_rep_rel ) = 0 ;
 446                   report('renshare total',loop_res_share,loop_ev,loop_prosu
      mage)$(report('renshare total',loop_res_share,loop_ev,loop_prosumage) < ep
      s_rep_rel ) = 0 ;
 447                   report('conshare total',loop_res_share,loop_ev,loop_prosu
      mage)$(report('conshare total',loop_res_share,loop_ev,loop_prosumage) < ep
      s_rep_rel ) = 0 ;
 448                   report('Energy total',loop_res_share,loop_ev,loop_prosuma
      ge)$(report('Energy total',loop_res_share,loop_ev,loop_prosumage) < eps_re
      p_abs) = 0 ;
 449   
 450   
 451  * ------------------------------------------------------------------------
      ----
 452   
 453  * DSM
 454   
 455   
 456  * ------------------------------------------------------------------------
      ----
 457   
 458  * EV
 459   
 460   
 461   
 462  * ------------------------------------------------------------------------
      ----
 463   
 464  * Reserves
 465   
 466   
 467   
 468   
 469  * ------------------------------------------------------------------------
      ----
 470   
 471  * Reserves and DSM
 472   
 473   
 474  * ------------------------------------------------------------------------
      ----
 475   
 476  * ------------------------------------------------------------------------
      ----
 477   
 478  * PROSUMAGE
 479  %prosumage$ontext
****  $409
 480          report_hours('demand prosumers',loop_res_share,loop_ev,loop_prosum
      age,h)$feat_node('prosumage')= phi_pro_load * d(h) ;
 481          report_hours('demand market',loop_res_share,loop_ev,loop_prosumage
      ,h)$feat_node('prosumage')= (1 - phi_pro_load) * d(h) ;
****              $140        $116                $140
 482          gross_energy_demand_market(scen)= gross_energy_demand(scen)- gross
      _energy_demand_prosumers_selfgen(scen);
 483   
 484          report_prosumage_tech_hours('generation prosumers',loop_res_share,
      loop_ev,loop_prosumage,res,h)$feat_node('prosumage')= sum(scen$(map(scen,l
      oop_res_share,loop_ev,loop_prosumage)) , phi_res(res,h) * lev_N_RES_PRO(sc
      en,res) ) ;
 485          report_prosumage_tech_hours('curtailment of fluct res prosumers',l
      oop_res_share,loop_ev,loop_prosumage,res,h)$feat_node('prosumage')=  sum(s
      cen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_CU_PRO(scen,re
      s,h)) ;
 486          report_prosumage_tech_hours('generation prosumers self-consumption
      ',loop_res_share,loop_ev,loop_prosumage,res,h)$feat_node('prosumage')= sum
      (scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_G_RES_PRO(sc
      en,res,h) ) ;
 487          report_prosumage_tech_hours('generation prosumers to market',loop_
      res_share,loop_ev,loop_prosumage,res,h)$feat_node('prosumage')= sum(scen$(
      map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_G_MARKET_PRO2M(scen
      ,res,h) ) ;
 488          report_prosumage_tech_hours('withdrawal prosumers from market',loo
      p_res_share,loop_ev,loop_prosumage,'',h)$feat_node('prosumage')= sum(scen$
      (map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_G_MARKET_M2PRO(sce
      n,h) ) ;
 489          report_prosumage_tech_hours('storage loading prosumers PRO2PRO',lo
      op_res_share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(sc
      en$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( res , lev_STO_
      IN_PRO2PRO(scen,res,sto,h))) ;
 490          report_prosumage_tech_hours('storage loading prosumers PRO2M',loop
      _res_share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(scen
      $(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( res , lev_STO_IN
      _PRO2M(scen,res,sto,h))) ;
 491          report_prosumage_tech_hours('storage loading prosumers M2PRO',loop
      _res_share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(scen
      $(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_IN_M2PRO(scen
      ,sto,h)) ;
 492          report_prosumage_tech_hours('storage loading prosumers M2M',loop_r
      es_share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(scen$(
      map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_IN_M2M(scen,sto
      ,h)) ;
 493          report_prosumage_tech_hours('storage generation prosumers PRO2PRO'
      ,loop_res_share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum
      (scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_OUT_PRO2
      PRO(scen,sto,h)) ;
 494          report_prosumage_tech_hours('storage generation prosumers PRO2M',l
      oop_res_share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(s
      cen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_OUT_PRO2M(
      scen,sto,h)) ;
 495          report_prosumage_tech_hours('storage generation prosumers M2PRO',l
      oop_res_share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(s
      cen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_OUT_M2PRO(
      scen,sto,h)) ;
 496          report_prosumage_tech_hours('storage generation prosumers M2M',loo
      p_res_share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(sce
      n$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_OUT_M2M(scen
      ,sto,h)) ;
 497          report_prosumage_tech_hours('storage level prosumers',loop_res_sha
      re,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(scen$(map(sc
      en,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_L_PRO(scen,sto,h)) ;
 498          report_prosumage_tech_hours('storage level prosumers PRO2PRO',loop
      _res_share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(scen
      $(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_L_PRO2PRO(sce
****                                                                       $140
      n,sto,h)) ;
 499          report_prosumage_tech_hours('storage level prosumers PRO2M',loop_r
      es_share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(scen$(
      map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_L_PRO2M(scen,st
****                                                                   $140
      o,h)) ;
 500          report_prosumage_tech_hours('storage level prosumers M2PRO',loop_r
      es_share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(scen$(
      map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_L_M2PRO(scen,st
****                                                                   $140
      o,h)) ;
 501          report_prosumage_tech_hours('storage level prosumers M2M',loop_res
      _share,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(scen$(ma
      p(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_L_M2M(scen,sto,h)
****                                                               $140
      ) ;
 502   
 503          report_market_tech_hours('generation market',loop_res_share,loop_e
      v,loop_prosumage,con,h)$feat_node('prosumage')= sum(scen$(map(scen,loop_re
      s_share,loop_ev,loop_prosumage)) , lev_G_L(scen,con,h) + corr_fac_dis(scen
      ,con,h)) ;
 504          report_market_tech_hours('generation market',loop_res_share,loop_e
      v,loop_prosumage,res,h)$feat_node('prosumage')= sum(scen$(map(scen,loop_re
      s_share,loop_ev,loop_prosumage)) , lev_G_L(scen,res,h) + corr_fac_dis(scen
      ,res,h) + lev_G_RES(scen,res,h)) ;
 505          report_market_tech_hours('generation market',loop_res_share,loop_e
      v,loop_prosumage,rsvr,h)$feat_node('prosumage')= sum(scen$(map(scen,loop_r
      es_share,loop_ev,loop_prosumage)) , lev_RSVR_OUT(scen,rsvr,h) + corr_fac_r
****                                                 $140                       
      svr(scen,rsvr,h)) ;
        $141
 506          report_market_tech_hours('curtailment of fluct res market',loop_re
      s_share,loop_ev,loop_prosumage,res,h)$feat_node('prosumage')=  sum(scen$(m
      ap(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_CU(scen,res,h)) ;
 507          report_market_tech_hours('generation storage market',loop_res_shar
      e,loop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(scen$(map(sce
      n,loop_res_share,loop_ev,loop_prosumage)) , lev_STO_OUT(scen,sto,h)) ;
 508          report_market_tech_hours('storage loading market',loop_res_share,l
      oop_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(scen$(map(scen,l
      oop_res_share,loop_ev,loop_prosumage)) , lev_STO_IN(scen,sto,h)) ;
 509          report_market_tech_hours('storage level market',loop_res_share,loo
      p_ev,loop_prosumage,sto,h)$feat_node('prosumage')=  sum(scen$(map(scen,loo
      p_res_share,loop_ev,loop_prosumage)) , lev_STO_L(scen,sto,h)) ;
 510          report_market_tech_hours('market to prosumer storage M2PRO',loop_r
      es_share,loop_ev,loop_prosumage,'Interaction with prosumers',h)$feat_node(
      'prosumage')=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
      , sum( sto , lev_STO_IN_M2PRO(scen,sto,h)) ) ;
 511          report_market_tech_hours('market to prosumer storage M2M',loop_res
      _share,loop_ev,loop_prosumage,'Interaction with prosumers',h)$feat_node('p
      rosumage')=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , 
      sum( sto , lev_STO_IN_M2M(scen,sto,h)) ) ;
 512          report_market_tech_hours('prosumer storage to market PRO2M',loop_r
      es_share,loop_ev,loop_prosumage,'Interaction with prosumers',h)$feat_node(
      'prosumage')=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
      , sum( sto , lev_STO_OUT_PRO2M(scen,sto,h)) ) ;
 513          report_market_tech_hours('prosumer storage to market M2M',loop_res
      _share,loop_ev,loop_prosumage,'Interaction with prosumers',h)$feat_node('p
      rosumage')=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , 
      sum( sto , lev_STO_OUT_M2M(scen,sto,h)) ) ;
 514          report_market_tech_hours('energy market to prosumer',loop_res_shar
      e,loop_ev,loop_prosumage,'Interaction with prosumers',h)$feat_node('prosum
      age')=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_G
      _MARKET_M2PRO(scen,h) )   ;
 515          report_market_tech_hours('energy prosumer to market',loop_res_shar
      e,loop_ev,loop_prosumage,'Interaction with prosumers',h)$feat_node('prosum
      age')=  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( 
      res , lev_G_MARKET_PRO2M(scen,res,h)) )  ;
 516   
 517          report_node('gross energy demand market',loop_res_share,loop_ev,lo
      op_prosumage)$feat_node('prosumage')= sum( scen$(map(scen,loop_res_share,l
      oop_ev,loop_prosumage)) , gross_energy_demand_market(scen,n)) ;
****                                                             $149,148
 518          report_node('gross energy demand prosumers self generation',loop_r
      es_share,loop_ev,loop_prosumage)$feat_node('prosumage')= sum( scen$(map(sc
      en,loop_res_share,loop_ev,loop_prosumage)) , gross_energy_demand_prosumers
      _selfgen(scen,n)) ;
****                 $149,148
 519   
 520          report_prosumage_tech('capacities renewable prosumers',loop_res_sh
      are,loop_ev,loop_prosumage,res)$feat_node('prosumage')=  sum( scen$(map(sc
      en,loop_res_share,loop_ev,loop_prosumage)) , lev_N_RES_PRO(scen,res) ) ;
 521          report_prosumage_tech('capacities storage MW prosumers',loop_res_s
      hare,loop_ev,loop_prosumage,sto)$feat_node('prosumage')=  sum( scen$(map(s
      cen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_P_PRO(scen,sto)) ;
 522          report_prosumage_tech('capacities storage MWh prosumers',loop_res_
      share,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')=  sum( scen$(ma
****                                    $148                                    
      p(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_E_PRO(scen,sto)
      ) * %sec_hour% ;
          $119     $409
 523          report_prosumage_tech('Storage in total prosumers PRO2PRO',loop_re
      s_share,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')= sum( h, repo
****                                      $148
      rt_prosumage_tech_hours('storage loading prosumers PRO2PRO',loop_res_share
      ,loop_ev,loop_prosumage,sto,h)) ;
 524          report_prosumage_tech('Storage in total prosumers PRO2PRO',loop_re
      s_share,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')= sum( h, repo
****                                      $148
      rt_prosumage_tech_hours('storage loading prosumers PRO2PRO',loop_res_share
      ,loop_ev,loop_prosumage,sto,h));
 525          report_prosumage_tech('Storage in total prosumers PRO2M',loop_res_
      share,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')= sum( h, report
****                                    $148
      _prosumage_tech_hours('storage loading prosumers PRO2M',loop_res_share,loo
      p_ev,loop_prosumage,sto,h));
 526          report_prosumage_tech('Storage in total prosumers M2PRO',loop_res_
      share,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')= sum( h, report
****                                    $148
      _prosumage_tech_hours('storage loading prosumers M2PRO',loop_res_share,loo
      p_ev,loop_prosumage,sto,h));
 527          report_prosumage_tech('Storage in total prosumers M2M',loop_res_sh
      are,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')= sum( h, report_p
****                                  $148
      rosumage_tech_hours('storage loading prosumers M2M',loop_res_share,loop_ev
      ,loop_prosumage,sto,h));
 528          report_prosumage_tech('Storage out total prosumers PRO2PRO',loop_r
      es_share,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')= sum( h, rep
****                                       $148
      ort_prosumage_tech_hours('storage generation prosumers PRO2PRO',loop_res_s
      hare,loop_ev,loop_prosumage,sto,h)) ;
 529          report_prosumage_tech('Storage out total prosumers PRO2M',loop_res
      _share,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')= sum( h, repor
****                                     $148
      t_prosumage_tech_hours('storage generation prosumers PRO2M',loop_res_share
      ,loop_ev,loop_prosumage,sto,h)) ;
 530          report_prosumage_tech('Storage out total prosumers M2PRO',loop_res
      _share,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')= sum( h, repor
****                                     $148
      t_prosumage_tech_hours('storage generation prosumers M2PRO',loop_res_share
      ,loop_ev,loop_prosumage,sto,h)) ;
 531          report_prosumage_tech('Storage out total prosumers M2M',loop_res_s
      hare,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')=  sum( h, report
****                                   $148
      _prosumage_tech_hours('storage generation prosumers M2M',loop_res_share,lo
      op_ev,loop_prosumage,sto,h)) ;
 532          report_prosumage_tech('Storage out total prosumers',loop_res_share
      ,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')= report_prosumage_te
****                               $148
      ch('Storage out total prosumers PRO2PRO',loop_res_share,loop_ev,loop_prosu
      mage,sto)+ report_prosumage_tech('Storage out total prosumers PRO2M',loop_
      res_share,loop_ev,loop_prosumage,sto)+ report_prosumage_tech('Storage out 
      total prosumers M2PRO',loop_res_share,loop_ev,loop_prosumage,sto)+ report_
      prosumage_tech('Storage out total prosumers M2M',loop_res_share,loop_ev,lo
      op_prosumage,sto);
 533          report_prosumage_tech('Generation total prosumers PRO2M',loop_res_
      share,loop_ev,loop_prosumage,'',n)$feat_node('prosumage')=  sum( (h,res) ,
****                                   $148
       report_prosumage_tech_hours('generation prosumers to market',loop_res_sha
      re,loop_ev,loop_prosumage,res,h)) ;
 534          report_prosumage_tech('Withdrawal total prosumers M2PRO',loop_res_
      share,loop_ev,loop_prosumage,'',n)$feat_node('prosumage')=  sum( h , repor
****                                   $148
      t_prosumage_tech_hours('withdrawal prosumers from market',loop_res_share,l
      oop_ev,loop_prosumage,'',h)) ;
 535          report_prosumage_tech('generation prosumers self-consumption',loop
      _res_share,loop_ev,loop_prosumage,'',n)$feat_node('prosumage')=  sum( (res
****                                        $148
      ,h) , report_prosumage_tech_hours('generation prosumers self-consumption',
      loop_res_share,loop_ev,loop_prosumage,res,h)) ;
 536          report_prosumage_tech('consumption share prosumers',loop_res_share
      ,loop_ev,loop_prosumage,res,n)$(feat_node('prosumage')AND sum( scen$(map(s
****                               $148
      cen,loop_res_share,loop_ev,loop_prosumage)) , sum( h , phi_pro_load * d(h)
       )) ) = sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum(
       h , lev_G_RES_PRO(scen,res,h)) ) / sum( scen$(map(scen,loop_res_share,loo
      p_ev,loop_prosumage)) , sum( h , phi_pro_load * d(h) ) );
 537          report_prosumage_tech('consumption share prosumers',loop_res_share
      ,loop_ev,loop_prosumage,sto,n)$(feat_node('prosumage')AND sum( scen$(map(s
****                               $148
      cen,loop_res_share,loop_ev,loop_prosumage)) , sum( h , phi_pro_load * d(h)
       )) ) = sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum(
       h , lev_STO_OUT_PRO2PRO(scen,sto,h) + lev_STO_OUT_M2PRO(scen,sto,h)) ) / 
      sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( h , phi
      _pro_load * d(h) ) );
 538          report_prosumage_tech('consumption share prosumers',loop_res_share
      ,loop_ev,loop_prosumage,'market',n)$sum( scen$(map(scen,loop_res_share,loo
****                                    $148
      p_ev,loop_prosumage)) , sum( h , phi_pro_load * d(h) ) ) = sum( scen$(map(
      scen,loop_res_share,loop_ev,loop_prosumage)) , sum( h , lev_G_MARKET_M2PRO
      (scen,h)) ) / sum( scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) 
      , sum( h , phi_pro_load * d(h) ) );
 539          report_prosumage_tech('curtailment of fluct res absolute prosumers
      ',loop_res_share,loop_ev,loop_prosumage,res,n)$feat_node('prosumage')=  su
****                                               $148                         
      m(h, sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_CU_P
      RO(scen,res,h) )) * %sec_hour% ;
                          $119     $409
 540          report_prosumage_tech('curtailment of fluct res relative prosumers
      ',loop_res_share,loop_ev,loop_prosumage,res,n)$(report_prosumage_tech('cur
****                                               $148
      tailment of fluct res absolute prosumers',loop_res_share,loop_ev,loop_pros
      umage,res)AND sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) ,
       lev_N_RES_PRO(scen,res)) > eps_rep_abs ) =  sum(h, sum(scen$(map(scen,loo
      p_res_share,loop_ev,loop_prosumage)) , lev_CU_PRO(scen,res,h) ))/ sum(scen
      $(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( h , phi_res(res,
      h) * lev_N_RES_PRO(scen,res)) ) ;
 541          report_prosumage_tech('average market value storage in PRO2PRO',lo
      op_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storage
****                                           $148
       in total prosumers PRO2PRO',loop_res_share,loop_ev,loop_prosumage,sto)> e
      ps_rep_abs*card(h)) = sum( h , report_hours('price',loop_res_share,loop_ev
      ,loop_prosumage,h)* sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosuma
      ge)) , sum( res , lev_STO_IN_PRO2PRO(scen,res,sto,h)))) / report_prosumage
      _tech('Storage in total prosumers PRO2PRO',loop_res_share,loop_ev,loop_pro
      sumage,sto);
 542          report_prosumage_tech('average market value storage in PRO2M',loop
      _res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storage i
****                                         $148
      n total prosumers PRO2M',loop_res_share,loop_ev,loop_prosumage,sto)> eps_r
      ep_abs*card(h)) = sum( h , report_hours('price',loop_res_share,loop_ev,loo
      p_prosumage,h)* sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage))
       , sum( res , lev_STO_IN_PRO2M(scen,res,sto,h)))) / report_prosumage_tech(
      'Storage in total prosumers PRO2M',loop_res_share,loop_ev,loop_prosumage,s
      to);
 543          report_prosumage_tech('average market value storage in M2PRO',loop
      _res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storage i
****                                         $148
      n total prosumers M2PRO',loop_res_share,loop_ev,loop_prosumage,sto)> eps_r
      ep_abs*card(h)) = sum( h , report_hours('price',loop_res_share,loop_ev,loo
      p_prosumage,h)* sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage))
       , lev_STO_IN_M2PRO(scen,sto,h))) / report_prosumage_tech('Storage in tota
      l prosumers M2PRO',loop_res_share,loop_ev,loop_prosumage,sto);
 544          report_prosumage_tech('average market value storage in M2M',loop_r
      es_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storage in 
****                                       $148
      total prosumers M2M',loop_res_share,loop_ev,loop_prosumage,sto)> eps_rep_a
      bs*card(h)) = sum( h , report_hours('price',loop_res_share,loop_ev,loop_pr
      osumage,h)* sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , l
      ev_STO_IN_M2M(scen,sto,h))) / report_prosumage_tech('Storage in total pros
      umers M2M',loop_res_share,loop_ev,loop_prosumage,sto);
 545          report_prosumage_tech('average market value storage out PRO2PRO',l
      oop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storag
****                                            $148
      e out total prosumers PRO2PRO',loop_res_share,loop_ev,loop_prosumage,sto)>
       eps_rep_abs*card(h)) = sum( h , report_hours('price',loop_res_share,loop_
      ev,loop_prosumage,h)* sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosu
      mage)) , lev_STO_OUT_PRO2PRO(scen,sto,h))) / report_prosumage_tech('Storag
      e in total prosumers PRO2PRO',loop_res_share,loop_ev,loop_prosumage,sto);
 546          report_prosumage_tech('average market value storage out PRO2M',loo
      p_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storage 
****                                          $148
      out total prosumers PRO2M',loop_res_share,loop_ev,loop_prosumage,sto)> eps
      _rep_abs*card(h)) = sum( h , report_hours('price',loop_res_share,loop_ev,l
      oop_prosumage,h)* sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage
      )) , lev_STO_OUT_PRO2M(scen,sto,h))) / report_prosumage_tech('Storage in t
      otal prosumers PRO2M',loop_res_share,loop_ev,loop_prosumage,sto);
 547          report_prosumage_tech('average market value storage out M2PRO',loo
      p_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storage 
****                                          $148
      out total prosumers M2PRO',loop_res_share,loop_ev,loop_prosumage,sto)> eps
      _rep_abs*card(h)) = sum( h , report_hours('price',loop_res_share,loop_ev,l
      oop_prosumage,h)* sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage
      )) , lev_STO_OUT_M2PRO(scen,sto,h))) / report_prosumage_tech('Storage in t
      otal prosumers M2PRO',loop_res_share,loop_ev,loop_prosumage,sto);
 548          report_prosumage_tech('average market value storage out M2M',loop_
      res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storage ou
****                                        $148
      t total prosumers M2M',loop_res_share,loop_ev,loop_prosumage,sto)> eps_rep
      _abs*card(h)) = sum( h , report_hours('price',loop_res_share,loop_ev,loop_
      prosumage,h)* sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) ,
       lev_STO_OUT_M2M(scen,sto,h))) / report_prosumage_tech('Storage in total p
      rosumers M2M',loop_res_share,loop_ev,loop_prosumage,sto);
 549          report_prosumage_tech('average market value generation PRO2M',loop
      _res_share,loop_ev,loop_prosumage,'',n)$(report_prosumage_tech('Generation
****                                        $148
       total prosumers PRO2M',loop_res_share,loop_ev,loop_prosumage,'')> eps_rep
      _abs*card(h)) = sum( h , report_hours('price',loop_res_share,loop_ev,loop_
      prosumage,h)* sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) ,
       sum( res , lev_G_MARKET_PRO2M(scen,res,h)))) / report_prosumage_tech('Gen
      eration total prosumers PRO2M',loop_res_share,loop_ev,loop_prosumage,'');
 550          report_prosumage_tech('average market value withdrawal M2PRO',loop
      _res_share,loop_ev,loop_prosumage,'',n)$(report_prosumage_tech('Withdrawal
****                                        $148
       total prosumers M2PRO',loop_res_share,loop_ev,loop_prosumage,'')> eps_rep
      _abs*card(h)) = sum( h , report_hours('price',loop_res_share,loop_ev,loop_
      prosumage,h)* sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) ,
       lev_G_MARKET_M2PRO(scen,h))) / report_prosumage_tech('Withdrawal total pr
      osumers M2PRO',loop_res_share,loop_ev,loop_prosumage,'');
 551          report_prosumage_tech('average market value generation PRO2PRO',lo
      op_res_share,loop_ev,loop_prosumage,'',n)$(report_prosumage_tech('generati
****                                          $148
      on prosumers self-consumption',loop_res_share,loop_ev,loop_prosumage,'')> 
      eps_rep_abs*card(h)) = sum( h , report_hours('price',loop_res_share,loop_e
      v,loop_prosumage,h)* sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosum
      age)) , sum( res , lev_G_RES_PRO(scen,res,h)))) / report_prosumage_tech('g
      eneration prosumers self-consumption',loop_res_share,loop_ev,loop_prosumag
      e,'');
 552          report_prosumage_tech('FLH prosumers',loop_res_share,loop_ev,loop_
      prosumage,res,n)$(feat_node('prosumage')AND sum(scen$(map(scen,loop_res_sh
****                 $148
      are,loop_ev,loop_prosumage)) , lev_N_RES_PRO(scen,res) > eps_rep_ins)) = s
      um( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_G
      _MARKET_PRO2M(scen,res,h) + sum( sto , lev_STO_IN_PRO2PRO(scen,res,sto,h))
       + lev_G_RES_PRO(scen,res,h) )) / sum(scen$(map(scen,loop_res_share,loop_e
      v,loop_prosumage)) , lev_N_RES_PRO(scen,res) ) ;
 553  %reserves% report_prosumage_tech('FLH prosumers',loop_res_share,loop_ev,lo
****  $409
      op_prosumage,sto,n)$(feat_node('prosumage')AND sum(scen$(map(scen,loop_res
      _share,loop_ev,loop_prosumage)) , lev_N_STO_P_PRO(scen,sto)) > eps_rep_ins
      ) = report_prosumage_tech('Storage out total prosumers',loop_res_share,loo
      p_ev,loop_prosumage,sto)/ sum(scen$(map(scen,loop_res_share,loop_ev,loop_p
      rosumage)) , lev_N_STO_P_PRO(scen,sto)) ;
 554  %reserves% report_prosumage_tech('Storage cycles prosumers',loop_res_share
****  $409
      ,loop_ev,loop_prosumage,sto,n)$(feat_node('prosumage')AND sum(scen$(map(sc
      en,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_E_PRO(scen,sto)) > 
      eps_rep_ins) = report_prosumage_tech('Storage out total prosumers',loop_re
      s_share,loop_ev,loop_prosumage,sto)/ sum(scen$(map(scen,loop_res_share,loo
      p_ev,loop_prosumage)) , lev_N_STO_E_PRO(scen,sto)) * %sec_hour% ;
 555          report_prosumage_tech('Storage EP-ratio prosumers',loop_res_share,
      loop_ev,loop_prosumage,sto,n)$(feat_node('prosumage')AND sum(scen$(map(sce
****                              $148                                          
      n,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_P_PRO(scen,sto) ) > 
      eps_rep_ins AND sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage))
       , lev_N_STO_E_PRO(scen,sto) ) * %sec_hour% > eps_rep_ins ) = sum(scen$(ma
                                       $119     $8,36             $409
      p(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_E_PRO(scen,sto)
       ) * %sec_hour% / sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage
      )) , lev_N_STO_P_PRO(scen,sto) ) ;
 556   
 557          report_market_tech('capacities renewable market',loop_res_share,lo
      op_ev,loop_prosumage,res,n)$feat_node('prosumage')=  sum( scen$(map(scen,l
      oop_res_share,loop_ev,loop_prosumage)) , lev_N_TECH(scen,res) ) ;
 558          report_market_tech('capacities reservoir MW market',loop_res_share
      ,loop_ev,loop_prosumage,rsvr,n)$feat_node('prosumage')=  sum( scen$(map(sc
      en,loop_res_share,loop_ev,loop_prosumage)) , lev_N_RSVR_P(scen,rsvr) );
****                                                          $140
 559          report_market_tech('capacities reservoir MWh market',loop_res_shar
      e,loop_ev,loop_prosumage,rsvr,n)$feat_node('prosumage')=  sum( scen$(map(s
      cen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_RSVR_E(scen,rsvr) );
****                                                           $140
 560          report_market_tech('capacities storage MW market',loop_res_share,l
      oop_ev,loop_prosumage,sto,n)$feat_node('prosumage')=  sum( scen$(map(scen,
      loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_P(scen,sto)) ;
 561          report_market_tech('capacities storage MWh market',loop_res_share,
      loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')=  sum( scen$(map(scen
      ,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_E(scen,sto)) * %sec_h
****                                                                      $119  
      our% ;
         $409
 562          report_market_tech('curtailment of fluct res absolute market',loop
      _res_share,loop_ev,loop_prosumage,res,n)$feat_node('prosumage')=  sum(h, s
      um(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_CU(scen,re
      s,h) )) * %sec_hour% ;
****            $119     $409
 563          report_market_tech('curtailment of fluct res relative market',loop
      _res_share,loop_ev,loop_prosumage,res,n)$(report_market_tech('curtailment 
      of fluct res absolute market',loop_res_share,loop_ev,loop_prosumage,res)AN
****                                                                         $14
      D sum(h, sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_
      8
      G_RES(scen,res,h) - corr_fac_nondis(scen,res,h)) ) + sum(h, sum(scen$(map(
      scen,loop_res_share,loop_ev,loop_prosumage)) , lev_CU(scen,res,h))) > card
      (h)*eps_rep_abs ) =  sum(h, sum(scen$(map(scen,loop_res_share,loop_ev,loop
      _prosumage)) , lev_CU(scen,res,h) ))/( sum(h,  sum(scen$(map(scen,loop_res
      _share,loop_ev,loop_prosumage)) , lev_G_RES(scen,res,h) - corr_fac_nondis(
      scen,res,h)) ) + sum(h,sum(scen$(map(scen,loop_res_share,loop_ev,loop_pros
      umage)) , lev_CU(scen,res,h)  )) ) ;
 564          report_market_tech('capacities conventional market',loop_res_share
      ,loop_ev,loop_prosumage,con,n)$feat_node('prosumage')=  sum( scen$(map(sce
      n,loop_res_share,loop_ev,loop_prosumage)) , lev_N_TECH(scen,con)) ;
 565          report_market_tech('Storage out total market non-reserves',loop_re
      s_share,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')= sum(h, repor
      t_market_tech_hours('generation storage market',loop_res_share,loop_ev,loo
      p_prosumage,sto,h)) * %sec_hour% ;
****                        $119     $409
 566          report_market_tech('Storage in total market non-reserves',loop_res
      _share,loop_ev,loop_prosumage,sto,n)$feat_node('prosumage')= sum(h, report
      _market_tech_hours('storage loading market',loop_res_share,loop_ev,loop_pr
      osumage,sto,h)) * %sec_hour% ;
****                    $119     $409
 567          report_market_tech('FLH market non-reserves',loop_res_share,loop_e
      v,loop_prosumage,res,n)$(feat_node('prosumage')AND sum(scen$(map(scen,loop
      _res_share,loop_ev,loop_prosumage)) , lev_N_TECH(scen,res)) > eps_rep_ins)
       = sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , l
      ev_G_RES(scen,res,h) + lev_G_L(scen,res,h)- corr_fac_dis(scen,res,h)) ) / 
      sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_TECH(sc
      en,res)) ;
 568          report_market_tech('FLH market non-reserves',loop_res_share,loop_e
      v,loop_prosumage,con,n)$(feat_node('prosumage')AND sum(scen$(map(scen,loop
      _res_share,loop_ev,loop_prosumage)) , lev_N_TECH(scen,con)) > eps_rep_ins)
       = sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , l
      ev_G_L(scen,con,h)) ) / sum(scen$(map(scen,loop_res_share,loop_ev,loop_pro
      sumage)) , lev_N_TECH(scen,con)) ;
 569  %reserves% report_market_tech('FLH market non-reserves',loop_res_share,loo
****  $409
      p_ev,loop_prosumage,sto,n)$(feat_node('prosumage')AND sum(scen$(map(scen,l
      oop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_P(scen,sto)) > eps_rep_
      ins) = report_market_tech('Storage out total market non-reserves',loop_res
      _share,loop_ev,loop_prosumage,sto)/ sum(scen$(map(scen,loop_res_share,loop
      _ev,loop_prosumage)) , lev_N_STO_P(scen,sto)) ;
 570  %reserves% report_market_tech('Storage cycles market non-reserves',loop_re
****  $409
      s_share,loop_ev,loop_prosumage,sto,n)$(feat_node('prosumage')AND sum(scen$
      (map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_E(scen,sto))
       > eps_rep_ins) = report_market_tech('Storage out total market non-reserve
      s',loop_res_share,loop_ev,loop_prosumage,sto)/ sum(scen$(map(scen,loop_res
      _share,loop_ev,loop_prosumage)) , lev_N_STO_E(scen,sto)) * %sec_hour% ;
 571          report_market_tech('Storage EP-ratio market',loop_res_share,loop_e
      v,loop_prosumage,sto,n)$(feat_node('prosumage')AND sum(scen$(map(scen,loop
      _res_share,loop_ev,loop_prosumage)) , lev_N_STO_P(scen,sto) ) > eps_rep_in
      s AND sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_S
      TO_E(scen,sto) ) * %sec_hour% > eps_rep_ins ) = sum(scen$(map(scen,loop_re
****                     $119     $8,36             $409
      s_share,loop_ev,loop_prosumage)) , lev_N_STO_E(scen,sto) ) * %sec_hour% / 
      sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_P(s
      cen,sto) ) ;
 572   
 573          report_prosumage('gross energy demand prosumers',loop_res_share,lo
      op_ev,loop_prosumage,n)$feat_node('prosumage')= sum( scen$(map(scen,loop_r
      es_share,loop_ev,loop_prosumage)) , gross_energy_demand_prosumers(scen,n))
****                                                                  $141
       ;
 574          report_prosumage('gross energy demand prosumers from market',loop_
      res_share,loop_ev,loop_prosumage,n)$feat_node('prosumage')= sum( scen$(map
      (scen,loop_res_share,loop_ev,loop_prosumage)) , gross_energy_demand_prosum
      ers_market(scen,n)) ;
****                   $148
 575          report_prosumage('gross energy demand prosumers self generation',l
      oop_res_share,loop_ev,loop_prosumage,n)$feat_node('prosumage')= sum( scen$
      (map(scen,loop_res_share,loop_ev,loop_prosumage)) , gross_energy_demand_pr
      osumers_selfgen(scen,n)) ;
****                        $148
 576          report_prosumage('self-generation share prosumers total',loop_res_
      share,loop_ev,loop_prosumage,n)$(feat_node('prosumage')AND sum(scen$(map(s
      cen,loop_res_share,loop_ev,loop_prosumage)) , gross_energy_demand_prosumer
      s(scen))) = sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , g
****        $148                                                                
      ross_energy_demand_prosumers_selfgen(scen,n)) / sum( scen$(map(scen,loop_r
                                                 $148                           
      es_share,loop_ev,loop_prosumage)) , gross_energy_demand_prosumers(scen)) ;
                                                                            $148
 577          report_prosumage('market share prosumers',loop_res_share,loop_ev,l
      oop_prosumage,n)$(feat_node('prosumage')AND  sum(scen$(map(scen,loop_res_s
      hare,loop_ev,loop_prosumage)) , gross_energy_demand_prosumers(scen))) = su
****                                                                    $148    
      m(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , gross_energy_de
      mand_prosumers_market(scen,n)) / sum( scen$(map(scen,loop_res_share,loop_e
                                  $148                                          
      v,loop_prosumage)) , gross_energy_demand_prosumers(scen)) ;
                                                             $148
 578          report_prosumage('curtailment of fluct res absolute prosumers',loo
      p_res_share,loop_ev,loop_prosumage,n)$feat_node('prosumage')= sum((res,h),
       sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_CU_PRO(s
      cen,res,h))) * %sec_hour% ;
****                 $119     $409
 579          report_prosumage('curtailment of fluct res relative prosumers',loo
      p_res_share,loop_ev,loop_prosumage,n)$(feat_node('prosumage')AND sum(scen$
      (map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( (res,h) , phi_res
      (res,h) * lev_N_RES_PRO(scen,res))))  = sum(scen$(map(scen,loop_res_share,
      loop_ev,loop_prosumage)) , sum( (h,res) , lev_CU_PRO(scen,res,h) )) / sum(
      scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( (res,h) , ph
      i_res(res,h) * lev_N_RES_PRO(scen,res)) ) ;
 580          report_prosumage('share self-generation curtailed',loop_res_share,
      loop_ev,loop_prosumage,n)$(feat_node('prosumage')AND sum(scen$(map(scen,lo
      op_res_share,loop_ev,loop_prosumage)) , sum( (res,h) , phi_res(res,h) * le
      v_N_RES_PRO(scen,res)) )) = sum(scen$(map(scen,loop_res_share,loop_ev,loop
      _prosumage)) , sum( (h,res) , lev_CU_PRO(scen,res,h) )) / sum(scen$(map(sc
      en,loop_res_share,loop_ev,loop_prosumage)) , sum( (res,h) , phi_res(res,h)
       * lev_N_RES_PRO(scen,res)) ) ;
 581          report_prosumage('share self-generation direct consumption',loop_r
      es_share,loop_ev,loop_prosumage,n)$(feat_node('prosumage')AND sum(scen$(ma
      p(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( (res,h) , phi_res(re
      s,h) * lev_N_RES_PRO(scen,res)) )) = sum(scen$(map(scen,loop_res_share,loo
      p_ev,loop_prosumage)) , sum( (h,res) , lev_G_RES_PRO(scen,res,h) )) / sum(
      scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( (res,h) , ph
      i_res(res,h) * lev_N_RES_PRO(scen,res)) ) ;
 582          report_prosumage('share self-generation to market',loop_res_share,
      loop_ev,loop_prosumage,n)$(feat_node('prosumage')AND sum(scen$(map(scen,lo
      op_res_share,loop_ev,loop_prosumage)) , sum( (res,h) , phi_res(res,h) * le
      v_N_RES_PRO(scen,res))) ) = sum(scen$(map(scen,loop_res_share,loop_ev,loop
      _prosumage)) , sum( (h,res) , lev_G_MARKET_PRO2M(scen,res,h) )) / sum(scen
      $(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( (res,h) , phi_re
      s(res,h) * lev_N_RES_PRO(scen,res)) ) ;
 583          report_prosumage('share self-generation stored PRO2PRO',loop_res_s
      hare,loop_ev,loop_prosumage,n)$(feat_node('prosumage')AND sum(scen$(map(sc
      en,loop_res_share,loop_ev,loop_prosumage)) , sum( (res,h) , phi_res(res,h)
       * lev_N_RES_PRO(scen,res))) ) = sum(scen$(map(scen,loop_res_share,loop_ev
      ,loop_prosumage)) , sum( (h,sto,res) , lev_STO_IN_PRO2PRO(scen,res,sto,h) 
      )) / sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( (re
      s,h) , phi_res(res,h) * lev_N_RES_PRO(scen,res)) ) ;
 584          report_prosumage('share self-generation stored PRO2M',loop_res_sha
      re,loop_ev,loop_prosumage,n)$(feat_node('prosumage')AND sum(scen$(map(scen
      ,loop_res_share,loop_ev,loop_prosumage)) , sum( (res,h) , phi_res(res,h) *
       lev_N_RES_PRO(scen,res))) ) = sum(scen$(map(scen,loop_res_share,loop_ev,l
      oop_prosumage)) , sum( (h,sto,res) , lev_STO_IN_PRO2M(scen,res,sto,h) )) /
       sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( (res,h)
       , phi_res(res,h) * lev_N_RES_PRO(scen,res)) ) ;
 585          report_prosumage('Capacity total prosumers',loop_res_share,loop_ev
      ,loop_prosumage,n)$feat_node('prosumage')= sum( res , sum(scen$(map(scen,l
      oop_res_share,loop_ev,loop_prosumage)) , lev_N_RES_PRO(scen,res)) ) + sum(
       sto , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_
      STO_P_PRO(scen,sto)) ) ;
 586   
 587          report_prosumage_tech('Capacity share prosumers',loop_res_share,lo
      op_ev,loop_prosumage,res,n)$report_prosumage('Capacity total prosumers',lo
****                            $148                                            
      op_res_share,loop_ev,loop_prosumage)= sum(scen$(map(scen,loop_res_share,lo
                                         $148                                   
      op_ev,loop_prosumage)) , lev_N_RES_PRO(scen,res) ) / report_prosumage('Cap
      acity total prosumers',loop_res_share,loop_ev,loop_prosumage)+ 1e-9 ;
                                                                  $148
 588          report_prosumage_tech('Capacity share prosumers',loop_res_share,lo
      op_ev,loop_prosumage,sto,n)$report_prosumage('Capacity total prosumers',lo
****                            $148                                            
      op_res_share,loop_ev,loop_prosumage)= sum(scen$(map(scen,loop_res_share,lo
                                         $148                                   
      op_ev,loop_prosumage)) , lev_N_STO_P_PRO(scen,sto) ) / report_prosumage('C
      apacity total prosumers',loop_res_share,loop_ev,loop_prosumage)+ 1e-9 ;
                                                                    $148
 589   
 590          report_market('gross energy demand market',loop_res_share,loop_ev,
      loop_prosumage,n)$feat_node('prosumage')= sum( scen$(map(scen,loop_res_sha
      re,loop_ev,loop_prosumage)) , gross_energy_demand_market(scen,n)) ;
****                                                                 $148
 591          report_market('curtailment of fluct res absolute market',loop_res_
      share,loop_ev,loop_prosumage,n)$feat_node('prosumage')= sum((res,h), sum(s
      cen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_CU(scen,res,h)
      )) * %sec_hour% ;
****       $119     $409
 592          report_market('curtailment of fluct res relative market',loop_res_
      share,loop_ev,loop_prosumage,n)$(feat_node('prosumage')AND sum(scen$(map(s
      cen,loop_res_share,loop_ev,loop_prosumage)) , sum( (h,res) , phi_res(res,h
      )*lev_N_TECH(scen,res)) ) > eps_rep_abs*card(res)*card(h) ) = sum( (res,h)
      , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_CU(scen
      ,res,h)))/ sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , su
      m( (res,h) , phi_res(res,h) * lev_N_TECH(scen,res)) ) ;
 593          report_market('Share market energy transferred to prosumer consump
      tion',loop_res_share,loop_ev,loop_prosumage,n)$feat_node('prosumage')= sum
      ( h, sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_G_MA
      RKET_M2PRO(scen,h)) ) / sum( scen$(map(scen,loop_res_share,loop_ev,loop_pr
      osumage)) , gross_energy_demand_market(scen)) ;
 594          report_market('Share market energy transferred to prosumer storage
       M2PRO',loop_res_share,loop_ev,loop_prosumage,n)$feat_node('prosumage')= s
      um( h, sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( s
      to , lev_STO_IN_M2PRO(scen,sto,h))) ) / sum( scen$(map(scen,loop_res_share
      ,loop_ev,loop_prosumage)) , gross_energy_demand_market(scen)) ;
 595          report_market('Share market energy transferred to prosumer storage
       M2M',loop_res_share,loop_ev,loop_prosumage,n)$feat_node('prosumage')= sum
      ( h, sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( sto
       , lev_STO_IN_M2M(scen,sto,h))) ) / sum( scen$(map(scen,loop_res_share,loo
      p_ev,loop_prosumage)) , gross_energy_demand_market(scen)) ;
 596          report_market('Share market energy tranferred from prosumer genera
      tion',loop_res_share,loop_ev,loop_prosumage,n)$feat_node('prosumage')= sum
      ( h, sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( res
       , lev_G_MARKET_PRO2M(scen,res,h))) ) / sum( scen$(map(scen,loop_res_share
      ,loop_ev,loop_prosumage)) , gross_energy_demand_market(scen)) ;
 597          report_market('Share market energy transferred from prosumer stora
      ge PRO2M',loop_res_share,loop_ev,loop_prosumage,n)$feat_node('prosumage')=
       sum( h, sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum(
       sto , lev_STO_OUT_PRO2M(scen,sto,h))) ) / sum( scen$(map(scen,loop_res_sh
      are,loop_ev,loop_prosumage)) , gross_energy_demand_market(scen)) ;
 598          report_market('Share market energy transferred from prosumer stora
      ge M2M',loop_res_share,loop_ev,loop_prosumage,n)$feat_node('prosumage')= s
      um( h, sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , sum( s
      to , lev_STO_OUT_M2M(scen,sto,h))) ) / sum( scen$(map(scen,loop_res_share,
      loop_ev,loop_prosumage)) , gross_energy_demand_market(scen)) ;
 599          report_market('Capacity total market',loop_res_share,loop_ev,loop_
      prosumage,n)$feat_node('prosumage')= sum( tech , sum(scen$(map(scen,loop_r
      es_share,loop_ev,loop_prosumage)) , lev_N_TECH(scen,tech))) + sum( sto , s
      um(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)) , lev_N_STO_P(sc
      en,sto) )) + sum( rsvr ,  sum(scen$(map(scen,loop_res_share,loop_ev,loop_p
      rosumage)) , lev_N_RSVR_P(scen,rsvr))) + sum( dsm_curt ,  sum(scen$(map(sc
****                                                       $120,340             
      en,loop_res_share,loop_ev,loop_prosumage)) , lev_N_DSM_CU(scen,dsm_curt)))
                                                              $140              
       + sum( dsm_shift ,  sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosum
                      $120,340                                                  
      age)) , lev_N_DSM_SHIFT(scen,dsm_shift))) ;
                            $140
 600          report_market('Energy demand total market',loop_res_share,loop_ev,
      loop_prosumage,n)$feat_node('prosumage')= (sum( h , (1 - phi_pro_load) * d
      (h) ) + sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_prosumage)
      ) , lev_G_MARKET_M2PRO(scen,h))) + sum( (sto,h) , sum(scen$(map(scen,loop_
      res_share,loop_ev,loop_prosumage)) , lev_STO_IN(scen,sto,h) + lev_STO_IN_M
      2M(scen,sto,h) + lev_STO_IN_M2PRO(scen,sto,h) ) )) * %sec_hour%
****                                                       $119     $409
 601  %prosumage$ontext
 602  %prosumage$ontext
 603  %prosumage$ontext
 604  %prosumage$ontext
 605  ;
 606          report_market('energy generated gross market',loop_res_share,loop_
      ev,loop_prosumage,n)$feat_node('prosumage')= sum( h , sum(scen$(map(scen,l
      oop_res_share,loop_ev,loop_prosumage)) , sum( dis ,lev_G_L(scen,dis,h)) + 
      sum( nondis ,lev_G_RES(scen,nondis,h)) + sum( res , lev_G_MARKET_PRO2M(sce
      n,res,h) - corr_fac_nondis(scen,res,h)) + sum( rsvr , lev_RSVR_OUT(scen,rs
      vr,h)- corr_fac_rsvr(scen,rsvr,h)) + sum( sto , lev_STO_OUT_M2M(scen,sto,h
      ) + lev_STO_OUT(scen,sto,h) - corr_fac_sto(scen,sto,h)) + sum( dsm_shift ,
       lev_DSM_DO_DEMAND(scen,dsm_shift,h) - corr_fac_dsm_shift(scen,dsm_shift,h
****                   $140                                   $141              
      )) + sum( dsm_curt , lev_DSM_CU(scen,dsm_curt,h)) + sum( ev , lev_EV_DISCH
                                    $140                        $120,340        
      ARGE(scen,ev,h)) - corr_fac_ev(scen,h) )) ;
         $140                      $141
 607   
 608          report_market_tech('Capacity share market',loop_res_share,loop_ev,
      loop_prosumage,tech)$(feat_node('prosumage')AND report_market('Capacity to
****                     $148                                                   
      tal market',loop_res_share,loop_ev,loop_prosumage,n)) = sum( scen$(map(sce
                                                         $149                   
      n,loop_res_share,loop_ev,loop_prosumage)) , lev_N_TECH(scen,tech) ) / repo
      rt_market('Capacity total market',loop_res_share,loop_ev,loop_prosumage)+ 
                                                                             $14
      1e-9 ;
      8
 609          report_market_tech('Capacity share market',loop_res_share,loop_ev,
      loop_prosumage,rsvr,n)$feat_node('prosumage')= sum(scen$(map(scen,loop_res
      _share,loop_ev,loop_prosumage)) , lev_N_RSVR_P(scen,rsvr) ) / report_marke
      t('Capacity total market',loop_res_share,loop_ev,loop_prosumage)+ 1e-9 ;
****                                                                 $148
 610          report_market_tech('Capacity share market',loop_res_share,loop_ev,
      loop_prosumage,sto,n)$feat_node('prosumage')= sum(scen$(map(scen,loop_res_
      share,loop_ev,loop_prosumage)) , lev_N_STO_P(scen,sto) ) / report_market('
      Capacity total market',loop_res_share,loop_ev,loop_prosumage)+ 1e-9 ;
****                                                              $148
 611          report_market_tech('Energy share in gross nodal market generation'
      ,loop_res_share,loop_ev,loop_prosumage,con,n)$(feat_node('prosumage')AND r
      eport_market('energy generated gross market',loop_res_share,loop_ev,loop_p
      rosumage,n)) = sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_pro
      sumage)) , lev_G_L(scen,con,h)) ) / report_market('energy generated gross 
      market',loop_res_share,loop_ev,loop_prosumage)* %sec_hour% + 1e-9 ;
****                                               $148,119    $409
 612          report_market_tech('Energy share in gross nodal market generation'
      ,loop_res_share,loop_ev,loop_prosumage,res,n)$(feat_node('prosumage')AND r
      eport_market('energy generated gross market',loop_res_share,loop_ev,loop_p
      rosumage,n)) = sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_pro
      sumage)) , lev_G_L(scen,res,h) + lev_G_MARKET_PRO2M(scen,res,h) + lev_G_RE
      S(scen,res,h) - corr_fac_nondis(scen,res,h)) ) / report_market('energy gen
      erated gross market',loop_res_share,loop_ev,loop_prosumage)* %sec_hour% + 
****                                                            $148,119    $409
      1e-9 ;
 613          report_market_tech('Energy share in gross nodal market generation'
      ,loop_res_share,loop_ev,loop_prosumage,rsvr,n)$(feat_node('prosumage')AND 
      report_market('energy generated gross market',loop_res_share,loop_ev,loop_
      prosumage,n)) = sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_pr
      osumage)) , lev_RSVR_OUT(scen,rsvr,h) - corr_fac_rsvr(scen,rsvr,h)) ) / re
      port_market('energy generated gross market',loop_res_share,loop_ev,loop_pr
      osumage)* %sec_hour% + 1e-9 ;
****         $148,119    $409
 614          report_market_tech('Energy share in gross nodal market generation'
      ,loop_res_share,loop_ev,loop_prosumage,sto,n)$(feat_node('prosumage')AND r
      eport_market('energy generated gross market',loop_res_share,loop_ev,loop_p
      rosumage,n)) = sum( h , sum(scen$(map(scen,loop_res_share,loop_ev,loop_pro
      sumage)) , lev_STO_OUT_M2M(scen,sto,h) + lev_STO_OUT(scen,sto,h) - corr_fa
      c_sto(scen,sto,h)) ) / report_market('energy generated gross market',loop_
      res_share,loop_ev,loop_prosumage)* %sec_hour% + 1e-9 ;
****                                  $148,119    $409
 615   
 616                   report_hours('demand prosumers',loop_res_share,loop_ev,lo
      op_prosumage,h)$(report_hours('demand prosumers',loop_res_share,loop_ev,lo
      op_prosumage,h)< eps_rep_abs) = 0 ;
 617                   report_hours('demand market',loop_res_share,loop_ev,loop_
      prosumage,h)$(report_hours('demand market',loop_res_share,loop_ev,loop_pro
      sumage,h)< eps_rep_abs) = 0 ;
 618   
 619                   report_prosumage_tech_hours('generation prosumers',loop_r
      es_share,loop_ev,loop_prosumage,res,h)$(report_prosumage_tech_hours('gener
      ation prosumers',loop_res_share,loop_ev,loop_prosumage,res,h)< eps_rep_abs
      ) = 0 ;
 620                   report_prosumage_tech_hours('curtailment of fluct res pro
      sumers',loop_res_share,loop_ev,loop_prosumage,res,h)$(report_prosumage_tec
      h_hours('curtailment of fluct res prosumers',loop_res_share,loop_ev,loop_p
      rosumage,res,h)< eps_rep_abs) = 0 ;
 621                   report_prosumage_tech_hours('generation prosumers self-co
      nsumption',loop_res_share,loop_ev,loop_prosumage,res,h)$(report_prosumage_
      tech_hours('generation prosumers self-consumption',loop_res_share,loop_ev,
      loop_prosumage,res,h)< eps_rep_abs) = 0 ;
 622                   report_prosumage_tech_hours('generation prosumers to mark
      et',loop_res_share,loop_ev,loop_prosumage,res,h)$(report_prosumage_tech_ho
      urs('generation prosumers to market',loop_res_share,loop_ev,loop_prosumage
      ,res,h)< eps_rep_abs) = 0 ;
 623                   report_prosumage_tech_hours('withdrawal prosumers from ma
      rket',loop_res_share,loop_ev,loop_prosumage,'',h)$(report_prosumage_tech_h
      ours('withdrawal prosumers from market',loop_res_share,loop_ev,loop_prosum
      age,'',h)< eps_rep_abs) = 0 ;
 624                   report_prosumage_tech_hours('storage loading prosumers PR
      O2PRO',loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tech
      _hours('storage loading prosumers PRO2PRO',loop_res_share,loop_ev,loop_pro
      sumage,sto,h)< eps_rep_abs) = 0 ;
 625                   report_prosumage_tech_hours('storage loading prosumers PR
      O2M',loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tech_h
      ours('storage loading prosumers PRO2M',loop_res_share,loop_ev,loop_prosuma
      ge,sto,h)< eps_rep_abs) = 0 ;
 626                   report_prosumage_tech_hours('storage loading prosumers M2
      PRO',loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tech_h
      ours('storage loading prosumers M2PRO',loop_res_share,loop_ev,loop_prosuma
      ge,sto,h)< eps_rep_abs) = 0 ;
 627                   report_prosumage_tech_hours('storage loading prosumers M2
      M',loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tech_hou
      rs('storage loading prosumers M2M',loop_res_share,loop_ev,loop_prosumage,s
      to,h)< eps_rep_abs) = 0 ;
 628                   report_prosumage_tech_hours('storage generation prosumers
       PRO2PRO',loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_t
      ech_hours('storage generation prosumers PRO2PRO',loop_res_share,loop_ev,lo
      op_prosumage,sto,h)< eps_rep_abs) = 0 ;
 629                   report_prosumage_tech_hours('storage generation prosumers
       PRO2M',loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tec
      h_hours('storage generation prosumers PRO2M',loop_res_share,loop_ev,loop_p
      rosumage,sto,h)< eps_rep_abs) = 0 ;
 630                   report_prosumage_tech_hours('storage generation prosumers
       M2PRO',loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tec
      h_hours('storage generation prosumers M2PRO',loop_res_share,loop_ev,loop_p
      rosumage,sto,h)< eps_rep_abs) = 0 ;
 631                   report_prosumage_tech_hours('storage generation prosumers
       M2M',loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tech_
      hours('storage generation prosumers M2M',loop_res_share,loop_ev,loop_prosu
      mage,sto,h)< eps_rep_abs) = 0 ;
 632                   report_prosumage_tech_hours('storage level prosumers',loo
      p_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tech_hours('st
      orage level prosumers',loop_res_share,loop_ev,loop_prosumage,sto,h)< eps_r
      ep_abs) = 0 ;
 633                   report_prosumage_tech_hours('storage level prosumers PRO2
      PRO',loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tech_h
      ours('storage level prosumers PRO2PRO',loop_res_share,loop_ev,loop_prosuma
      ge,sto,h)< eps_rep_abs) = 0 ;
 634                   report_prosumage_tech_hours('storage level prosumers PRO2
      M',loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tech_hou
      rs('storage level prosumers PRO2M',loop_res_share,loop_ev,loop_prosumage,s
      to,h)< eps_rep_abs) = 0 ;
 635                   report_prosumage_tech_hours('storage level prosumers M2PR
      O',loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tech_hou
      rs('storage level prosumers M2PRO',loop_res_share,loop_ev,loop_prosumage,s
      to,h)< eps_rep_abs) = 0 ;
 636                   report_prosumage_tech_hours('storage level prosumers M2M'
      ,loop_res_share,loop_ev,loop_prosumage,sto,h)$(report_prosumage_tech_hours
      ('storage level prosumers M2M',loop_res_share,loop_ev,loop_prosumage,sto,h
      )< eps_rep_abs) = 0 ;
 637   
 638                   report_market_tech_hours('generation market',loop_res_sha
      re,loop_ev,loop_prosumage,con,h)$(report_market_tech_hours('generation mar
      ket',loop_res_share,loop_ev,loop_prosumage,con,h)< eps_rep_abs) = 0 ;
 639                   report_market_tech_hours('generation market',loop_res_sha
      re,loop_ev,loop_prosumage,res,h)$(report_market_tech_hours('generation mar
      ket',loop_res_share,loop_ev,loop_prosumage,res,h)< eps_rep_abs) = 0 ;
 640                   report_market_tech_hours('generation market',loop_res_sha
      re,loop_ev,loop_prosumage,rsvr,h)$(report_market_tech_hours('generation ma
      rket',loop_res_share,loop_ev,loop_prosumage,rsvr,h)< eps_rep_abs) = 0 ;
 641                   report_market_tech_hours('curtailment of fluct res market
      ',loop_res_share,loop_ev,loop_prosumage,res,h)$(report_market_tech_hours('
      curtailment of fluct res market',loop_res_share,loop_ev,loop_prosumage,res
      ,h)< eps_rep_abs) =  0 ;
 642                   report_market_tech_hours('generation storage market',loop
      _res_share,loop_ev,loop_prosumage,sto,h)$(report_market_tech_hours('genera
      tion storage market',loop_res_share,loop_ev,loop_prosumage,sto,h)< eps_rep
      _abs) =  0 ;
 643                   report_market_tech_hours('storage loading market',loop_re
      s_share,loop_ev,loop_prosumage,sto,h)$(report_market_tech_hours('storage l
      oading market',loop_res_share,loop_ev,loop_prosumage,sto,h)< eps_rep_abs) 
      = 0 ;
 644                   report_market_tech_hours('storage level market',loop_res_
      share,loop_ev,loop_prosumage,sto,h)$(report_market_tech_hours('storage lev
      el market',loop_res_share,loop_ev,loop_prosumage,sto,h)< eps_rep_abs) = 0 
      ;
 645                   report_market_tech_hours('market to prosumer storage M2PR
      O',loop_res_share,loop_ev,loop_prosumage,'Interaction with prosumers',h)$(
      report_market_tech_hours('market to prosumer storage M2PRO',loop_res_share
      ,loop_ev,loop_prosumage,'Interaction with prosumers',h)< eps_rep_abs) = 0 
      ;
 646                   report_market_tech_hours('market to prosumer storage M2M'
      ,loop_res_share,loop_ev,loop_prosumage,'Interaction with prosumers',h)$(re
      port_market_tech_hours('market to prosumer storage M2M',loop_res_share,loo
      p_ev,loop_prosumage,'Interaction with prosumers',h)< eps_rep_abs) = 0 ;
 647                   report_market_tech_hours('prosumer storage to market PRO2
      M',loop_res_share,loop_ev,loop_prosumage,'Interaction with prosumers',h)$(
      report_market_tech_hours('prosumer storage to market PRO2M',loop_res_share
      ,loop_ev,loop_prosumage,'Interaction with prosumers',h)< eps_rep_abs) = 0 
      ;
 648                   report_market_tech_hours('prosumer storage to market M2M'
      ,loop_res_share,loop_ev,loop_prosumage,'Interaction with prosumers',h)$(re
      port_market_tech_hours('prosumer storage to market M2M',loop_res_share,loo
      p_ev,loop_prosumage,'Interaction with prosumers',h)< eps_rep_abs) = 0 ;
 649                   report_market_tech_hours('energy market to prosumer',loop
      _res_share,loop_ev,loop_prosumage,'Interaction with prosumers',h)$(report_
      market_tech_hours('energy market to prosumer',loop_res_share,loop_ev,loop_
      prosumage,'Interaction with prosumers',h)< eps_rep_abs) = 0 ;
 650                   report_market_tech_hours('energy prosumer to market',loop
      _res_share,loop_ev,loop_prosumage,'Interaction with prosumers',h)$(report_
      market_tech_hours('energy prosumer to market',loop_res_share,loop_ev,loop_
      prosumage,'Interaction with prosumers',h)< eps_rep_abs) = 0 ;
 651   
 652                   report_prosumage_tech('capacities renewable prosumers',lo
      op_res_share,loop_ev,loop_prosumage,res,n)$(report_prosumage_tech('capacit
****                                           $148
      ies renewable prosumers',loop_res_share,loop_ev,loop_prosumage,res)< eps_r
      ep_ins) =  0 ;
 653                   report_prosumage_tech('capacities storage MW prosumers',l
      oop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('capaci
****                                            $148
      ties storage MW prosumers',loop_res_share,loop_ev,loop_prosumage,sto)< eps
      _rep_ins) =  0 ;
 654                   report_prosumage_tech('capacities storage MWh prosumers',
      loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('capac
****                                             $148
      ities storage MWh prosumers',loop_res_share,loop_ev,loop_prosumage,sto)< e
      ps_rep_ins) =  0 ;
 655                   report_prosumage_tech('consumption share prosumers',loop_
      res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('consumptio
****                                        $148
      n share prosumers',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_rel
      ) = 0 ;
 656                   report_prosumage_tech('consumption share prosumers',loop_
      res_share,loop_ev,loop_prosumage,res,n)$(report_prosumage_tech('consumptio
****                                        $148
      n share prosumers',loop_res_share,loop_ev,loop_prosumage,res)< eps_rep_rel
      ) = 0 ;
 657                   report_prosumage_tech('consumption share prosumers',loop_
      res_share,loop_ev,loop_prosumage,'market',n)$(report_prosumage_tech('consu
****                                             $148
      mption share prosumers',loop_res_share,loop_ev,loop_prosumage,'market')< e
      ps_rep_rel) = 0 ;
 658                   report_prosumage_tech('curtailment of fluct res absolute 
      prosumers',loop_res_share,loop_ev,loop_prosumage,res,n)$(report_prosumage_
****                                                        $148
      tech('curtailment of fluct res absolute prosumers',loop_res_share,loop_ev,
      loop_prosumage,res)< eps_rep_ins) = 0 ;
 659                   report_prosumage_tech('curtailment of fluct res relative 
      prosumers',loop_res_share,loop_ev,loop_prosumage,res,n)$(report_prosumage_
****                                                        $148
      tech('curtailment of fluct res relative prosumers',loop_res_share,loop_ev,
      loop_prosumage,res)< eps_rep_rel) = 0 ;
 660                   report_prosumage_tech('Storage in total prosumers PRO2PRO
      ',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Sto
****                                               $148                         
      rage in total prosumers PRO2PRO',loop_res_share,loop_ev,loop_prosumage,sto
      ,n)< eps_rep_abs*card(h)) = 0 ;
        $148
 661                   report_prosumage_tech('Storage in total prosumers PRO2M',
      loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Stora
****                                             $148                           
      ge in total prosumers PRO2M',loop_res_share,loop_ev,loop_prosumage,sto,n)<
                                                                              $1
       eps_rep_abs*card(h)) = 0 ;
      48
 662                   report_prosumage_tech('Storage in total prosumers M2PRO',
      loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Stora
****                                             $148                           
      ge in total prosumers M2PRO',loop_res_share,loop_ev,loop_prosumage,sto,n)<
                                                                              $1
       eps_rep_abs*card(h)) = 0 ;
      48
 663                   report_prosumage_tech('Storage in total prosumers M2M',lo
      op_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storage
****                                           $148                             
       in total prosumers M2M',loop_res_share,loop_ev,loop_prosumage,sto,n)< eps
                                                                          $148
      _rep_abs*card(h)) = 0 ;
 664                   report_prosumage_tech('Storage out total prosumers PRO2PR
      O',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('St
****                                                $148                        
      orage out total prosumers PRO2PRO',loop_res_share,loop_ev,loop_prosumage,s
      to,n)< eps_rep_abs*card(h)) = 0 ;
          $148
 665                   report_prosumage_tech('Storage out total prosumers PRO2M'
      ,loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Stor
****                                              $148                          
      age out total prosumers PRO2M',loop_res_share,loop_ev,loop_prosumage,sto,n
      )< eps_rep_abs*card(h)) = 0 ;
      $148
 666                   report_prosumage_tech('Storage out total prosumers M2PRO'
      ,loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Stor
****                                              $148                          
      age out total prosumers M2PRO',loop_res_share,loop_ev,loop_prosumage,sto,n
      )< eps_rep_abs*card(h)) = 0 ;
      $148
 667                   report_prosumage_tech('Storage out total prosumers M2M',l
      oop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storag
****                                            $148                            
      e out total prosumers M2M',loop_res_share,loop_ev,loop_prosumage,sto,n)< e
                                                                            $148
      ps_rep_abs*card(h)) = 0 ;
 668                   report_prosumage_tech('Storage out total prosumers',loop_
      res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storage ou
****                                        $148                                
      t total prosumers',loop_res_share,loop_ev,loop_prosumage,sto,n)< eps_rep_a
                                                                    $148
      bs*card(h)) = 0 ;
 669                   report_prosumage_tech('Generation total prosumers PRO2M',
      loop_res_share,loop_ev,loop_prosumage,'',n)$(report_prosumage_tech('Genera
****                                            $148
      tion total prosumers PRO2M',loop_res_share,loop_ev,loop_prosumage,'')< eps
      _rep_abs*card(h)) = 0 ;
 670                   report_prosumage_tech('Withdrawal total prosumers M2PRO',
      loop_res_share,loop_ev,loop_prosumage,'',n)$(report_prosumage_tech('Withdr
****                                            $148
      awal total prosumers M2PRO',loop_res_share,loop_ev,loop_prosumage,'')< eps
      _rep_abs*card(h)) = 0 ;
 671                   report_prosumage_tech('generation prosumers self-consumpt
      ion',loop_res_share,loop_ev,loop_prosumage,'',n)$(report_prosumage_tech('g
****                                                 $148
      eneration prosumers self-consumption',loop_res_share,loop_ev,loop_prosumag
      e,'')< eps_rep_abs * card(h)) = 0 ;
 672                   report_prosumage_tech('average market value storage in PR
      O2PRO',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech
****                                                    $148
      ('average market value storage in PRO2PRO',loop_res_share,loop_ev,loop_pro
      sumage,sto)< eps_rep_abs) = 0 ;
 673                   report_prosumage_tech('average market value storage in PR
      O2M',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('
****                                                  $148
      average market value storage in PRO2M',loop_res_share,loop_ev,loop_prosuma
      ge,sto)< eps_rep_abs) = 0 ;
 674                   report_prosumage_tech('average market value storage in M2
      PRO',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('
****                                                  $148
      average market value storage in M2PRO',loop_res_share,loop_ev,loop_prosuma
      ge,sto)< eps_rep_abs) = 0 ;
 675                   report_prosumage_tech('average market value storage in M2
      M',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('av
****                                                $148
      erage market value storage in M2M',loop_res_share,loop_ev,loop_prosumage,s
      to)< eps_rep_abs) = 0 ;
 676                   report_prosumage_tech('average market value storage out P
      RO2PRO',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tec
****                                                     $148
      h('average market value storage out PRO2PRO',loop_res_share,loop_ev,loop_p
      rosumage,sto)< eps_rep_abs) = 0 ;
 677                   report_prosumage_tech('average market value storage out P
      RO2M',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech(
****                                                   $148
      'average market value storage out PRO2M',loop_res_share,loop_ev,loop_prosu
      mage,sto)< eps_rep_abs) = 0 ;
 678                   report_prosumage_tech('average market value storage out M
      2PRO',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech(
****                                                   $148
      'average market value storage out M2PRO',loop_res_share,loop_ev,loop_prosu
      mage,sto)< eps_rep_abs) = 0 ;
 679                   report_prosumage_tech('average market value storage out M
      2M',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('a
****                                                 $148
      verage market value storage out M2M',loop_res_share,loop_ev,loop_prosumage
      ,sto)< eps_rep_abs) = 0 ;
 680                   report_prosumage_tech('average market value generation PR
      O2M',loop_res_share,loop_ev,loop_prosumage,'',n)$(report_prosumage_tech('a
****                                                 $148
      verage market value generation PRO2M',loop_res_share,loop_ev,loop_prosumag
      e,'')< eps_rep_abs) = 0 ;
 681                   report_prosumage_tech('average market value withdrawal M2
      PRO',loop_res_share,loop_ev,loop_prosumage,'',n)$(report_prosumage_tech('a
****                                                 $148
      verage market value withdrawal M2PRO',loop_res_share,loop_ev,loop_prosumag
      e,'')< eps_rep_abs) = 0 ;
 682                   report_prosumage_tech('average market value generation PR
      O2PRO',loop_res_share,loop_ev,loop_prosumage,'',n)$(report_prosumage_tech(
****                                                   $148
      'average market value generation PRO2PRO',loop_res_share,loop_ev,loop_pros
      umage,'')< eps_rep_abs) = 0 ;
 683                   report_prosumage_tech('Capacity share prosumers',loop_res
      _share,loop_ev,loop_prosumage,res,n)$(report_prosumage_tech('Capacity shar
****                                     $148
      e prosumers',loop_res_share,loop_ev,loop_prosumage,res)< eps_rep_rel) = 0 
      ;
 684                   report_prosumage_tech('Capacity share prosumers',loop_res
      _share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Capacity shar
****                                     $148
      e prosumers',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_rel) = 0 
      ;
 685                   report_prosumage_tech('FLH prosumers',loop_res_share,loop
      _ev,loop_prosumage,res,n)$(report_prosumage_tech('FLH prosumers',loop_res_
****                          $148
      share,loop_ev,loop_prosumage,res)< eps_rep_abs) = 0 ;
 686  %reserves%       report_prosumage_tech('Storage cycles prosumers',loop_res
****  $409
      _share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storage cycle
      s prosumers',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_abs) = 0 
      ;
 687  %reserves%       report_prosumage_tech('FLH',loop_res_share,loop_ev,loop_p
****  $409
      rosumage,sto,n)$(report_prosumage_tech('FLH',loop_res_share,loop_ev,loop_p
      rosumage,sto)< eps_rep_abs) = 0 ;
 688                   report_prosumage_tech('Storage EP-ratio prosumers',loop_r
      es_share,loop_ev,loop_prosumage,sto,n)$(report_prosumage_tech('Storage EP-
****                                       $148
      ratio prosumers',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_rel) 
      = 0 ;
 689   
 690                   report_market_tech('capacities renewable market',loop_res
      _share,loop_ev,loop_prosumage,res,n)$(report_market_tech('capacities renew
      able market',loop_res_share,loop_ev,loop_prosumage,res)< eps_rep_abs) =  0
****                                                        $148
       ;
 691                   report_market_tech('capacities reservoir MW market',loop_
      res_share,loop_ev,loop_prosumage,rsvr,n)$(report_market_tech('capacities r
      eservoir MW market',loop_res_share,loop_ev,loop_prosumage,rsvr)< eps_rep_i
****                                                                $148
      ns) = 0 ;
 692                   report_market_tech('capacities reservoir MWh market',loop
      _res_share,loop_ev,loop_prosumage,rsvr,n)$(report_market_tech('capacities 
      reservoir MWh market',loop_res_share,loop_ev,loop_prosumage,rsvr)< eps_rep
****                                                                  $148
      _ins) = 0 ;
 693                   report_market_tech('capacities storage MW market',loop_re
      s_share,loop_ev,loop_prosumage,sto,n)$(report_market_tech('capacities stor
      age MW market',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_abs) = 
****                                                          $148
       0 ;
 694                   report_market_tech('capacities storage MWh market',loop_r
      es_share,loop_ev,loop_prosumage,sto,n)$(report_market_tech('capacities sto
      rage MWh market',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_abs) 
****                                                            $148
      =  0 ;
 695                   report_market_tech('curtailment of fluct res absolute mar
      ket',loop_res_share,loop_ev,loop_prosumage,res,n)$(report_market_tech('cur
      tailment of fluct res absolute market',loop_res_share,loop_ev,loop_prosuma
      ge,res)< eps_rep_abs*card(h)) = 0 ;
****        $148
 696                   report_market_tech('curtailment of fluct res relative mar
      ket',loop_res_share,loop_ev,loop_prosumage,res,n)$(report_market_tech('cur
      tailment of fluct res relative market',loop_res_share,loop_ev,loop_prosuma
      ge,res)< eps_rep_rel) = 0 ;
****        $148
 697                   report_market_tech('capacities conventional market',loop_
      res_share,loop_ev,loop_prosumage,con,n)$(report_market_tech('capacities co
      nventional market',loop_res_share,loop_ev,loop_prosumage,con)< eps_rep_ins
****                                                              $148
      ) = 0 ;
 698                   report_market_tech('capacities renewable market',loop_res
      _share,loop_ev,loop_prosumage,res,n)$(report_market_tech('capacities renew
      able market',loop_res_share,loop_ev,loop_prosumage,res)< eps_rep_ins) = 0 
****                                                        $148
      ;
 699                   report_market_tech('capacities storage MW market',loop_re
      s_share,loop_ev,loop_prosumage,sto,n)$(report_market_tech('capacities stor
      age MW market',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_ins) = 
****                                                          $148
       0 ;
 700                   report_market_tech('capacities storage MWh market',loop_r
      es_share,loop_ev,loop_prosumage,sto,n)$(report_market_tech('capacities sto
      rage MWh market',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_ins) 
****                                                            $148
      = 0 ;
 701                   report_market_tech('Storage out total market non-reserves
      ',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_market_tech('Storag
      e out total market non-reserves',loop_res_share,loop_ev,loop_prosumage,sto
      )< eps_rep_abs*card(h)) = 0 ;
****  $148
 702                   report_market_tech('Storage in total market non-reserves'
      ,loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_market_tech('Storage
       in total market non-reserves',loop_res_share,loop_ev,loop_prosumage,sto)<
****                                                                          $1
       eps_rep_abs*card(h)) = 0 ;
      48
 703                   report_market_tech('FLH market non-reserves',loop_res_sha
      re,loop_ev,loop_prosumage,res,n)$(report_market_tech('FLH market non-reser
      ves',loop_res_share,loop_ev,loop_prosumage,res)< eps_rep_abs) = 0 ;
****                                                $148
 704                   report_market_tech('FLH market non-reserves',loop_res_sha
      re,loop_ev,loop_prosumage,con,n)$(report_market_tech('FLH market non-reser
      ves',loop_res_share,loop_ev,loop_prosumage,con)< eps_rep_abs) = 0 ;
****                                                $148
 705  %reserves%       report_market_tech('FLH market non-reserves',loop_res_sha
****  $409
      re,loop_ev,loop_prosumage,sto,n)$(report_market_tech('FLH market non-reser
      ves',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_abs) = 0 ;
 706  %reserves%       report_market_tech('Storage cycles market non-reserves',l
****  $409
      oop_res_share,loop_ev,loop_prosumage,sto,n)$(report_market_tech('Storage c
      ycles market non-reserves',loop_res_share,loop_ev,loop_prosumage,sto)< eps
      _rep_abs) = 0 ;
 707                   report_market_tech('Storage EP-ratio market',loop_res_sha
      re,loop_ev,loop_prosumage,sto,n)$(report_market_tech('Storage EP-ratio mar
      ket',loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_rel) = 0 ;
****                                                $148
 708   
 709                   report_prosumage('gross energy demand prosumers',loop_res
      _share,loop_ev,loop_prosumage,n)$(report_prosumage('gross energy demand pr
      osumers',loop_res_share,loop_ev,loop_prosumage)< eps_rep_ins) = 0 ;
****                                                $148
 710                   report_prosumage('gross energy demand prosumers from mark
      et',loop_res_share,loop_ev,loop_prosumage,n)$(report_prosumage('gross ener
      gy demand prosumers from market',loop_res_share,loop_ev,loop_prosumage)< e
****                                                                        $148
      ps_rep_ins) = 0 ;
 711                   report_prosumage('gross energy demand prosumers self gene
      ration',loop_res_share,loop_ev,loop_prosumage,n)$(report_prosumage('gross 
      energy demand prosumers self generation',loop_res_share,loop_ev,loop_prosu
      mage)< eps_rep_ins) = 0 ;
****      $148
 712                   report_prosumage('self-generation share prosumage total',
      loop_res_share,loop_ev,loop_prosumage,n)$(report_prosumage('self-generatio
      n share prosumage total',loop_res_share,loop_ev,loop_prosumage)< eps_rep_r
****                                                                $148
      el) = 0 ;
 713                   report_prosumage('market share prosumage',loop_res_share,
      loop_ev,loop_prosumage,n)$(report_prosumage('market share prosumage',loop_
      res_share,loop_ev,loop_prosumage)< eps_rep_rel) = 0 ;
****                                  $148
 714                   report_prosumage('curtailment of fluct res absolute prosu
      mers',loop_res_share,loop_ev,loop_prosumage,n)$(report_prosumage('curtailm
      ent of fluct res absolute prosumers',loop_res_share,loop_ev,loop_prosumage
      )< eps_rep_ins) = 0 ;
****  $148
 715                   report_prosumage('curtailment of fluct res relative prosu
      mers',loop_res_share,loop_ev,loop_prosumage,n)$(report_prosumage('curtailm
      ent of fluct res relative prosumers',loop_res_share,loop_ev,loop_prosumage
      )< eps_rep_rel) = 0 ;
****  $148
 716                   report_prosumage('share self-generation curtailed',loop_r
      es_share,loop_ev,loop_prosumage,n)$(report_prosumage('share self-generatio
      n curtailed',loop_res_share,loop_ev,loop_prosumage)< eps_rep_rel) = 0 ;
****                                                    $148
 717                   report_prosumage('share self-generation direct consumptio
      n',loop_res_share,loop_ev,loop_prosumage,n)$(report_prosumage('share self-
      generation direct consumption',loop_res_share,loop_ev,loop_prosumage)< eps
****                                                                      $148
      _rep_rel) = 0 ;
 718                   report_prosumage('share self-generation to market',loop_r
      es_share,loop_ev,loop_prosumage,n)$(report_prosumage('share self-generatio
      n to market',loop_res_share,loop_ev,loop_prosumage)< eps_rep_rel) = 0 ;
****                                                    $148
 719                   report_prosumage('share self-generation stored PRO2PRO',l
      oop_res_share,loop_ev,loop_prosumage,n)$(report_prosumage('share self-gene
      ration stored PRO2PRO',loop_res_share,loop_ev,loop_prosumage)< eps_rep_rel
****                                                              $148
      ) = 0 ;
 720                   report_prosumage('share self-generation stored PRO2M',loo
      p_res_share,loop_ev,loop_prosumage,n)$(report_prosumage('share self-genera
      tion stored PRO2M',loop_res_share,loop_ev,loop_prosumage)< eps_rep_rel) = 
****                                                          $148
      0 ;
 721                   report_prosumage('Capacity total prosumers',loop_res_shar
      e,loop_ev,loop_prosumage,n)$(report_prosumage('Capacity total prosumers',l
      oop_res_share,loop_ev,loop_prosumage)< eps_rep_abs) = 0 ;
****                                      $148
 722   
 723                   report_market('gross energy demand market',loop_res_share
      ,loop_ev,loop_prosumage,n)$(report_market('gross energy demand market',loo
      p_res_share,loop_ev,loop_prosumage)< eps_rep_abs) = 0 ;
****                                    $148
 724                   report_market('curtailment of fluct res absolute market',
      loop_res_share,loop_ev,loop_prosumage,n)$(report_market('curtailment of fl
      uct res absolute market',loop_res_share,loop_ev,loop_prosumage)< eps_rep_a
****                                                                $148
      bs) = 0 ;
 725                   report_market('curtailment of fluct res relative market',
      loop_res_share,loop_ev,loop_prosumage,n)$(report_market('curtailment of fl
      uct res relative market',loop_res_share,loop_ev,loop_prosumage)< eps_rep_r
****                                                                $148
      el) = 0 ;
 726                   report_market('Share market energy transferred to prosume
      r consumption',loop_res_share,loop_ev,loop_prosumage,n)$(report_market('Sh
      are market energy transferred to prosumer consumption',loop_res_share,loop
      _ev,loop_prosumage)< eps_rep_rel) = 0 ;
****                    $148
 727                   report_market('Share market energy transferred to prosume
      r storage M2PRO',loop_res_share,loop_ev,loop_prosumage,n)$(report_market('
      Share market energy transferred to prosumer storage M2PRO',loop_res_share,
      loop_ev,loop_prosumage)< eps_rep_rel) = 0 ;
****                        $148
 728                   report_market('Share market energy transferred to prosume
      r storage M2M',loop_res_share,loop_ev,loop_prosumage,n)$(report_market('Sh
      are market energy transferred to prosumer storage M2M',loop_res_share,loop
      _ev,loop_prosumage)< eps_rep_rel) = 0 ;
****                    $148
 729                   report_market('Share market energy tranferred from prosum
      er generation',loop_res_share,loop_ev,loop_prosumage,n)$(report_market('Sh
      are market energy tranferred from prosumer generation',loop_res_share,loop
      _ev,loop_prosumage)< eps_rep_rel) = 0 ;
****                    $148
 730                   report_market('Share market energy transferred from prosu
      mer storage PRO2M',loop_res_share,loop_ev,loop_prosumage,n)$(report_market
      ('Share market energy transferred from prosumer storage PRO2M',loop_res_sh
      are,loop_ev,loop_prosumage)< eps_rep_rel) = 0 ;
****                            $148
 731                   report_market('Share market energy transferred from prosu
      mer storage M2M',loop_res_share,loop_ev,loop_prosumage,n)$(report_market('
      Share market energy transferred from prosumer storage M2M',loop_res_share,
      loop_ev,loop_prosumage)< eps_rep_rel) = 0 ;
****                        $148
 732                   report_market('Capacity total market',loop_res_share,loop
      _ev,loop_prosumage,n)$(report_market('Capacity total market',loop_res_shar
      e,loop_ev,loop_prosumage)< eps_rep_abs) = 0 ;
****                          $148
 733                   report_market('Energy demand total market',loop_res_share
      ,loop_ev,loop_prosumage,n)$(report_market('Energy demand total market',loo
      p_res_share,loop_ev,loop_prosumage)< eps_rep_abs) = 0 ;
****                                    $148
 734                   report_market('energy generated gross market',loop_res_sh
      are,loop_ev,loop_prosumage,n)$(report_market('energy generated gross marke
      t',loop_res_share,loop_ev,loop_prosumage)< eps_rep_abs) = 0 ;
****                                          $148
 735   
 736                   report_market_tech('Capacity share market',loop_res_share
      ,loop_ev,loop_prosumage,tech)$(report_market_tech('Capacity share market',
****                              $148                                          
      loop_res_share,loop_ev,loop_prosumage,tech)< eps_rep_rel) = 0 ;
                                                $148
 737                   report_market_tech('Capacity share market',loop_res_share
      ,loop_ev,loop_prosumage,sto,n)$(report_market_tech('Capacity share market'
      ,loop_res_share,loop_ev,loop_prosumage,sto)< eps_rep_rel) = 0 ;
****                                            $148
 738                   report_market_tech('Capacity share market',loop_res_share
      ,loop_ev,loop_prosumage,rsvr,n)$(report_market_tech('Capacity share market
      ',loop_res_share,loop_ev,loop_prosumage,rsvr)< eps_rep_rel) = 0 ;
****                                              $148
 739                   report_market_tech('Energy share in gross nodal market ge
      neration',loop_res_share,loop_ev,loop_prosumage,con,n)$(report_market_tech
      ('Energy share in gross nodal market generation',loop_res_share,loop_ev,lo
      op_prosumage,con)< eps_rep_rel) = 0 ;
****                  $148
 740                   report_market_tech('Energy share in gross nodal market ge
      neration',loop_res_share,loop_ev,loop_prosumage,res,n)$(report_market_tech
      ('Energy share in gross nodal market generation',loop_res_share,loop_ev,lo
      op_prosumage,res)< eps_rep_rel) = 0 ;
****                  $148
 741                   report_market_tech('Energy share in gross nodal market ge
      neration',loop_res_share,loop_ev,loop_prosumage,sto,n)$(report_market_tech
      ('Energy share in gross nodal market generation',loop_res_share,loop_ev,lo
      op_prosumage,sto)< eps_rep_rel) = 0 ;
****                  $148
 742                   report_market_tech('Energy share in gross nodal market ge
      neration',loop_res_share,loop_ev,loop_prosumage,rsvr,n)$(report_market_tec
      h('Energy share in gross nodal market generation',loop_res_share,loop_ev,l
      oop_prosumage,rsvr)< eps_rep_rel) = 0 ;
****                    $148
 745   
 746   
 747  * ------------------------------------------------------------------------
      ----
 748   
 749  * PROSUMAGE & DSM
 750   
 751   
 752   
 753  * ------------------------------------------------------------------------
      ----
 754   
 755   
 756   
 757  * ------------------------------------------------------------------------
      ----
 758   
 759  * HEAT
 760   
 761  * ------------------------------------------------------------------------
      ----
 762   
 763  * Reserves and heat
 764   
 765   
 766  * ------------------------------------------------------------------------
      ---- *
 767  * ------------------------------------------------------------------------
      ---- *
 768  * ------------------------------------------------------------------------
      ---- *
GAMS 24.2.3  r46072 Released May 22, 2014 WEX-WEI x86_64/MS Windows 10/24/18 19:37:08 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Error Messages


  8  ')' expected
 36  '=' or '..' or ':=' or '$=' operator expected
     rest of statement ignored
116  Label is unknown
119  Number (primary) expected
120  Unknown identifier entered as set
140  Unknown symbol
141  Symbol neither initialized nor assigned
        A wild shot: You may have spurious commas in the explanatory
        text of a declaration. Check symbol reference list.
148  Dimension different - The symbol is referenced with more/less
        indices as declared
149  Uncontrolled set entered as constant
340  A label/element with the same name exist. You may have forgotten
        to quote a label/element reference. For example,
        set i / a,b,c /; parameter x(i); x('a') = 10;
408  Too many ),] or }
409  Unrecognizable item - skip to find a new statement
       looking for a ';' or a key word to get started again

**** 360 ERROR(S)   0 WARNING(S)


COMPILATION TIME     =        0.718 SECONDS      3 MB  24.2.3 r46072 WEX-WEI


USER: Medium MUD - 10 User License                   S170316:1123AO-GEN
      Deutsches Institut fuer Wirtschaftsforschung DIW, AbteilungDC3975
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      C:\Users\cguenther\Documents\GitHub\prosumage\Code\Prosumage_Opt\Diet
           er_Module\Modified_MCP\report.gms
Output     C:\Users\cguenther\Documents\GitHub\prosumage\Code\Prosumage_Opt\Diet
           er_Module\Modified_MCP\report.lst

**** USER ERROR(S) ENCOUNTERED
