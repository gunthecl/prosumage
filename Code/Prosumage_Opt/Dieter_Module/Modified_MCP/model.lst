GAMS 24.7.4  r58773 Released Sep 19, 2016 WEX-WEI x86 64bit/MS Windows 11/21/18 13:24:07 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1   
   2  **************************************************************************
      ******
      The Dispatch and Investment Evaluation Tool with Endogenous Renewables (DI
      ETER).
      Version 1.3.0, October 2017.
      Written by Alexander Zerrahn and Wolf-Peter Schill.
      This work is licensed under the MIT License (MIT).
      For more information on this license, visit http://opensource.org/licenses
      /mit-license.php.
      Whenever you use this code, please refer to http://www.diw.de/dieter.
      We are happy to receive feedback under azerrahn@diw.de and wschill@diw.de.
  12  **************************************************************************
      ******
  13   
  14   
  15  Variables
  16  Z                Value objective function [Euro]
  17  ;
  18   
  19  Positive Variables
  20  G_L(tech,h)            Generation level in hour h [MWh]
****         $120,120
  21  G_UP(tech,h)           Generation upshift in hour h [MWh]
  22  G_DO(tech,h)           Generation downshift in hour h [MWh]
  23   
  24  G_RES(tech,h)          Generation renewables type res in hour h [MWh]
  25  CU(tech,h)             Renewables curtailment technology res in hour h [MW
      h]
  26   
  27  STO_IN(sto,h)          Storage inflow technology sto hour h [MWh]
****           $120
  28  STO_OUT(sto,h)         Storage outflow technology sto hour h [MWh]
  29  STO_L(sto,h)           Storage level technology sto hour h [MWh]
  30   
  31  N_TECH(tech)           Technology tech built [MW]
  32  N_STO_E(sto)           Storage technology built - Energy [MWh]
  33  N_STO_P(sto)           Storage loading and discharging capacity built - Ca
      pacity [MW]
  34   
  35  CU_PRO(tech,h)                 Prosumage: curtailment of renewable generat
      ion in hour h [MWh]
  36  G_MARKET_PRO2M(tech,h)         Prosumage. energy sent to market in hour h 
      [MWh]
  37  G_MARKET_M2PRO(h)              Prosumage: withdrawal of energy from market
       in hour h [MWh]
  38  G_RES_PRO(tech,h)              Prosumage: hourly renewables generation in 
      hour h [MWh]
  39  STO_IN_PRO2PRO(tech,sto,h)     Prosumage: storage loading from generation 
      for discharging to consumption in hour h [MWh]
  40  STO_OUT_PRO2PRO(sto,h)         Prosumage: storage discharging to consumpti
      on from generation in hour h [MWh]
  41  STO_L_PRO2PRO(sto,h)           Prosumage: storage level generation to cons
      umption in hour h [MWh]
  42  N_STO_E_PRO(sto)               Prosumage: installed storage energy [MWh]
  43  N_STO_P_PRO(sto)               Prosumage: installed storage power [MW]
  44  N_RES_PRO(tech)                Prosumage: installed renewables capacities 
      [MW]
  45   
  46  ;
  47   
  48   
  49   
  50   
  51  **************************************************************************
      ******
  52   
  53  Equations
  54  * Objective
  55  obj                      Objective cost minimization
  56   
  57  * Energy balance
  58  con1a_bal                Energy Balance
  59   
  60  * Load change costs
  61  con2a_loadlevel          Load change costs: Level
  62  con2b_loadlevelstart     Load change costs: Level for first period
  63   
  64  * Capacity contraints and flexibility constraints
  65  con3a_maxprod_dispatchable       Capacity Constraint conventionals
  66  con3e_maxprod_res                Capacity constraints renewables
  67   
  68  * Storage constraints
  69  con4a_stolev_start        Storage Level Dynamics Initial Condition
  70  con4b_stolev              Storage Level Dynamics
  71  con4c_stolev_max          Storage Power Capacity
  72  con4d_maxin_sto           Storage maximum inflow
  73  con4e_maxout_sto          Storage maximum outflow
  74  con4j_ending              End level equal to initial level
  75  con4k_PHS_EtoP            Maximum E to P ratio for PHS
  76   
  77  * Minimum restrictions for renewables and biomass
  78  con5a_minRES             Minimum yearly renewables requirement
  79  con5b_max_energy         Maximum yearly biomass energy
  80   
  81  * Maximum installation conditions
  82  con8a_max_I_power                Maximum installable capacity: Conventiona
      ls
  83  con8b_max_I_sto_e                Maximum installable energy: Storage in MW
      h
  84  con8c_max_I_sto_p                Maximum installable capacity: Storage inf
      low-outflow in MW
  85   
  86  con8f_max_pro_res                Maximum installable capacity: prosumage r
      enewables
  87  con8g_max_pro_sto_e              Maximum installable capacity: prosumage s
      torage energy
  88  con8h_max_sto_pro_p              Maximum installable capacity: prosumage s
      torage power
  89   
  90  * Prosumage
  91  con11a_pro_distrib                       Prosumage: distribution of genera
      ted energy
  92  con11b_pro_balance                       Prosumage: energy balance
  93  con11c_pro_selfcon                       Prosumage: minimum self-generatio
      n requirement
  94  con11d_pro_stolev_PRO2PRO                Prosumage: storage level prosumag
      er-to-prosumagers
  95  con11h_1_pro_stolev_start_PRO2PRO        Prosumage: storage level initial 
      conditions
  96  con11j_pro_stolev_max                    Prosumage: maximum overall storag
      e level
  97  con11k_pro_maxin_sto                     Prosumage: maximum storage inflow
  98  con11l_pro_maxout_sto                    Prosumage: maximum storage outflo
      w
  99  con11o_pro_ending                        Prosumage: storage ending conditi
      on
 100  ;
 101   
 102   
 103   
 104   
 105  **************************************************************************
      ******
 106   
 107  * ------------------------------------------------------------------------
      ---- *
 108  ***** Objective function *****
 109  * ------------------------------------------------------------------------
      ---- *
 110   
 111  obj..
 112           Z =E=
 113                     sum( (h,dis) , c_m(dis)*G_L(dis,h) )
****                               $120   $140
 114                   + sum( (h,dis)$(ord(h)>1) , c_up(dis)*G_UP(dis,h) )
****                                                  $140           $171
 115                   + sum( (h,dis) , c_do(dis)*G_DO(dis,h) )
****                                       $140           $171
 116                   + sum( (h,nondis) , c_cu(nondis)*CU(nondis,h) )
****                                  $120    $140               $171
 117                   + sum( (h,sto) , c_m_sto(sto) * ( STO_OUT(sto,h) + STO_IN
****                                          $140
      (sto,h) ) )
 118                   + sum( tech , c_i(tech)*N_TECH(tech) )
****                                   $140
 119                   + sum( tech , c_fix(tech)*N_TECH(tech) )
****                                     $140
 120                   + sum( sto , c_i_sto_e(sto)*N_STO_E(sto) )
****                                        $140
 121                   + sum( sto , c_fix_sto(sto)/2*(N_STO_P(sto)+ N_STO_E(sto)
****                                        $140
      ) )
 122                   + sum( sto , c_i_sto_p(sto)*N_STO_P(sto) )
****                                        $140
 123  %prosumage$ontext
****  $409
 124                   + sum( res , c_i(res)*N_RES_PRO(res) )
 125                   + sum( res , c_fix(res)*N_RES_PRO(res) )
 126   
 127                   + sum( sto , c_i_sto_e(sto)*N_STO_E_PRO(sto) )
 128                   + sum( sto , c_fix_sto(sto)/2*(N_STO_P_PRO(sto) + N_STO_E
      _PRO(sto)) )
 129                   + sum( sto , c_i_sto_p(sto)*N_STO_P_PRO(sto) )
 130                   + sum( (h,sto) , c_m_sto(sto) * ( STO_OUT_PRO2PRO(sto,h) 
      + sum( res , STO_IN_PRO2PRO(res,sto,h)) ) )
 133  ;
 134   
 135  * ------------------------------------------------------------------------
      ---- *
 136  ***** Energy balance and load levels *****
 137  * ------------------------------------------------------------------------
      ---- *
 138   
 139  * Energy balance
 140  con1a_bal(hh)..
****             $120
 141           ( 1 - phi_pro_load )* d(hh) + sum( sto , STO_IN(sto,hh) )
****                            $140 $140
 142  %prosumage$ontext
****  $37,409
 143           + G_MARKET_M2PRO(hh)
 146   
 147           =E=
 148           sum( dis , G_L(dis,hh)) + sum( nondis , G_RES(nondis,hh)) + sum( 
      sto , STO_OUT(sto,hh) )
 149   
 150  %prosumage$ontext
 151           + sum( res , G_MARKET_PRO2M(res,hh) )
 154   
 155  ;
 156   
 157  con2a_loadlevel(dis,h)$(ord(h) > 1)..
 158          G_L(dis,h) =E= G_L(dis,h-1) + G_UP(dis,h) - G_DO(dis,h)
****                                                $171          $171
 159  ;
 160   
 161  con2b_loadlevelstart(dis,h)$(ord(h) = 1)..
 162           G_L(dis,h) =E= G_UP(dis,h)
****                                  $171
 163  ;
 164   
 165  * ------------------------------------------------------------------------
      ---- *
 166  ***** Hourly maximum generation caps *****
 167  * ------------------------------------------------------------------------
      ---- *
 168   
 169  con3a_maxprod_dispatchable(dis,h)..
 170   
 171           N_TECH(dis) -  G_L(dis,h)  =G= 0
****                     $171
 172   
 173  ;
 174   
 175  con3e_maxprod_res(nondis,h)..
 176          G_RES(nondis,h) + CU(nondis,h)
****                      $171           $171
 177   
 178          =E= phi_res(nondis,h) * N_TECH(nondis)
****                    $140                       $171
 179  ;
 180   
 181  * ------------------------------------------------------------------------
      ---- *
 182  ***** Storage constraints *****
 183  * ------------------------------------------------------------------------
      ---- *
 184   
 185  con4a_stolev_start(sto,h)$(ord(h) = 1)..
 186          STO_L(sto,h) =E= phi_sto_ini(sto) * N_STO_E(sto) + STO_IN(sto,h)*(
****                                     $140                                   
      1+eta_sto(sto))/2 - STO_OUT(sto,h)/(1+eta_sto(sto))*2
              $140
 187  ;
 188   
 189  con4b_stolev(sto,h)$(ord(h)>1)..
 190           STO_L(sto,h) =E=  STO_L(sto,h-1) + STO_IN(sto,h)*(1+eta_sto(sto))
      /2 - STO_OUT(sto,h)/(1+eta_sto(sto))*2
 191  ;
 192   
 193  con4c_stolev_max(sto,h)..
 194         N_STO_E(sto) -  STO_L(sto,h) =G= 0
 195  ;
 196   
 197  con4d_maxin_sto(sto,h)..
 198   
 199          N_STO_P(sto) -  STO_IN(sto,h)   =G= 0
 200  ;
 201   
 202  con4e_maxout_sto(sto,h)..
 203   
 204          N_STO_P(sto) - STO_OUT(sto,h)   =G= 0
 205  ;
 206   
 207  con4j_ending(sto,h)$(ord(h) = card(h))..
 208   
 209           STO_L(sto,h) =E= phi_sto_ini(sto) * N_STO_E(sto)
 210  ;
 211   
 212  con4k_PHS_EtoP(sto)..
 213   
 214         etop_max(sto) * N_STO_P(sto) - N_STO_E(sto) =G= 0
****                $140
 215  ;
 216   
 217  * ------------------------------------------------------------------------
      ---- *
 218  ***** Quotas for renewables and biomass *****
 219  * ------------------------------------------------------------------------
      ---- *
 220   
 221  con5a_minRES..
 222  sum( h , G_L('bio',h) + sum( nondis , G_RES(nondis,h))
****                                                    $171
 223   
 224  %prosumage$ontext
****  $8,37,409
 225           + sum( sto , STO_OUT_PRO2PRO(sto,h)) + sum( res , G_MARKET_PRO2M(
      res,h) + G_RES_PRO(res,h))
 228  )
 229          =G= phi_min_res * phi_min_res_exog * sum( h ,
 230           sum( dis , G_L(dis,h)) + sum( nondis , G_RES(nondis,h))
 231   
 232  %prosumage$ontext
 233           + sum( res , phi_res(res,h) * N_RES_PRO(res) - CU_PRO(res,h))
 236           )
 237  ;
 238   
 239  con5b_max_energy(dis)$(m_e(dis))..
****                           $140
 240           m_e(dis) -  sum( h , G_L(dis,h) ) =G= 0
 241  ;
 242   
 243   
 244  * ------------------------------------------------------------------------
      ---- *
 245  ***** Maximum installation constraints *****
 246  * ------------------------------------------------------------------------
      ---- *
 247   
 248  con8a_max_I_power(tech)..
 249         m_p(tech) - N_TECH(tech)     =G= 0
****           $140
 250  ;
 251   
 252  con8b_max_I_sto_e(sto)..
 253         m_sto_e(sto) - N_STO_E(sto)  =G= 0
****               $140
 254  ;
 255   
 256  con8c_max_I_sto_p(sto)..
 257         m_sto_p(sto) -  N_STO_P(sto) =G= 0
****               $140
 258  ;
 259   
 260   
 261   
 262  con8f_max_pro_res(res)..
****                      $120,340
 263         m_res_pro(res) -  N_RES_PRO(res) =G= 0
****                 $140                   $171
 264  ;
 265   
 266  con8g_max_pro_sto_e(sto)..
 267         m_sto_pro_e(sto) -  N_STO_E_PRO(sto) =G= 0
****                   $140
 268  ;
 269   
 270  con8h_max_sto_pro_p(sto)..
 271          m_sto_pro_p(sto) -  N_STO_P_PRO(sto) =G= 0
****                    $140
 272  ;
 273   
 274  * ------------------------------------------------------------------------
      ---- *
 275  ***** Prosumage constraints *****
 276  * ------------------------------------------------------------------------
      ---- *
 277   
 278  con11a_pro_distrib(res,h)..
 279           phi_res(res,h) * N_RES_PRO(res)
****                                         $171
 280           =E=
 281           CU_PRO(res,h) + G_MARKET_PRO2M(res,h) + G_RES_PRO(res,h) + sum( s
****                     $171                    $171               $171        
      to , STO_IN_PRO2PRO(res,sto,h) )
                             $171
 282  ;
 283   
 284  con11b_pro_balance(h)..
 285           phi_pro_load * d(h)
 286           =E=
 287           sum( res , G_RES_PRO(res,h)) + sum( sto , STO_OUT_PRO2PRO(sto,h) 
****                                   $171
      ) + G_MARKET_M2PRO(h)
 288  ;
 289   
 290  con11c_pro_selfcon..
 291           sum( (h,res) , G_RES_PRO(res,h) ) + sum( (h,sto) , STO_OUT_PRO2PR
****                                       $171
      O(sto,h) )
 292           =G=
 293           phi_pro_self * sum( h , phi_pro_load * d(h))
****                      $140
 294  ;
 295   
 296  con11d_pro_stolev_PRO2PRO(sto,h)$(ord(h) > 1 )..
 297           STO_L_PRO2PRO(sto,h) =E= STO_L_PRO2PRO(sto,h-1) + sum( res , STO_
      IN_PRO2PRO(res,sto,h))*(1+eta_sto(sto))/2 - STO_OUT_PRO2PRO(sto,h)/(1+eta_
****                $171
      sto(sto))*2
 298  ;
 299   
 300   
 301  con11h_1_pro_stolev_start_PRO2PRO(sto,h)$( ord(h) = 1)..
 302          STO_L_PRO2PRO(sto,h) =E=   phi_sto_pro_ini(sto) * N_STO_E_PRO(sto)
****                                                   $140                     
       + sum( res , STO_IN_PRO2PRO(res,sto,h))*(1+eta_sto(sto))/2 - STO_OUT_PRO2
                                      $171
      PRO(sto,h)/(1+eta_sto(sto))*2
 303  ;
 304   
 305   
 306  con11j_pro_stolev_max(sto,h)..
 307         N_STO_E_PRO(sto) - STO_L_PRO2PRO(sto,h) =G= 0
 308  ;
 309   
 310  con11k_pro_maxin_sto(sto,h)..
 311          N_STO_P_PRO(sto) - sum( res , STO_IN_PRO2PRO(res,sto,h) )
****                                                          $171
 312          =G= 0
 313  ;
 314   
 315  con11l_pro_maxout_sto(sto,h)..
 316          N_STO_P_PRO(sto) - STO_OUT_PRO2PRO(sto,h)
 317          =G= 0
 318  ;
 319   
 320  con11o_pro_ending(sto,h)$( ord(h) = card(h))..
 321           STO_L_PRO2PRO(sto,h) =E= phi_sto_pro_ini(sto) * N_STO_E_PRO(sto)
 322  ;
 323   
 324   
 325  **************************************************************************
      ******
 326  ***** MODEL *****
 327  **************************************************************************
      ******
 328   
 329  model DIETER /
 330  obj
 331   
 332  con1a_bal
 333   
 334  con2a_loadlevel
 335  con2b_loadlevelstart
 336   
 337  con3a_maxprod_dispatchable
 338   
 339  con3e_maxprod_res
 340   
 341  con4a_stolev_start
 342  con4b_stolev
 343  con4c_stolev_max
 344  con4d_maxin_sto
 345  con4e_maxout_sto
 346   
 347  con4j_ending
 348  *con4k_PHS_EtoP
 349   
 350  con5a_minRES
 351  con5b_max_energy
 352   
 353  con8a_max_I_power
 354  con8b_max_I_sto_e
 355  con8c_max_I_sto_p
 356   
 357  %prosumage$ontext
****  $2       $140,2 $140
 358  con8f_max_pro_res
 359  con8g_max_pro_sto_e
 360  con8h_max_sto_pro_p
 361  con11a_pro_distrib
 362  con11b_pro_balance
 363  con11c_pro_selfcon
 364  con11d_pro_stolev_PRO2PRO
 365  con11h_1_pro_stolev_start_PRO2PRO
 366  con11j_pro_stolev_max
 367  con11k_pro_maxin_sto
 368  con11l_pro_maxout_sto
 369  con11o_pro_ending
 372   
 373  /;
GAMS 24.7.4  r58773 Released Sep 19, 2016 WEX-WEI x86 64bit/MS Windows 11/21/18 13:24:07 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Error Messages


  2  Identifier expected
  8  ')' expected
 37  '=l=' or '=e=' or '=g=' operator expected
120  Unknown identifier entered as set
140  Unknown symbol
171  Domain violation for set
340  A label/element with the same name exist. You may have forgotten
        to quote a label/element reference. For example,
        set i / a,b,c /; parameter x(i); x('a') = 10;
409  Unrecognizable item - skip to find a new statement
       looking for a ';' or a key word to get started again

**** 65 ERROR(S)   0 WARNING(S)


COMPILATION TIME     =        0.250 SECONDS      3 MB  24.7.4 r58773 WEX-WEI


USER: Medium MUD - 10 User License                   S170316:1123AO-GEN
      Deutsches Institut fuer Wirtschaftsforschung DIW, AbteilungDC3975
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      C:\Users\Lenovo\Documents\GitHub\prosumage\Code\Prosumage_Opt\Dieter_
           Module\Modified_MCP\model.gms
Output     C:\Users\Lenovo\Documents\GitHub\prosumage\Code\Prosumage_Opt\Dieter_
           Module\Modified_MCP\model.lst

**** USER ERROR(S) ENCOUNTERED
